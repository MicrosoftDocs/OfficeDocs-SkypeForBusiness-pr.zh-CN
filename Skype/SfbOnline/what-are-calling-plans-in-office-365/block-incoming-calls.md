---
<span data-ttu-id="365b3-101">标题:"块入站呼叫中 Skype 的业务联机"ms.author: tonysmit 作者： tonysmit 管理器： serdars ms.date: 05/07/2018 ms.topic： 文章 ms.assetid: ms.tgt.pltfrm： 云 ms.service: Skype-的-业务-联机 ms.collection: Adm_Skype4B_联机 ms.audience： 管理 appliesto： 业务 localization_priority 的 Skype： 正常 f1keywords： 无 ms.custom: PowerShell 说明:"使用 PowerShell 管理入站情况呼叫中 Skype 阻止业务 online"。</span><span class="sxs-lookup"><span data-stu-id="365b3-101">title: "Block Inbound Calls in Skype for Business Online" ms.author: tonysmit author: tonysmit manager: serdars ms.date: 05/07/2018 ms.topic: article ms.assetid: ms.tgt.pltfrm: cloud ms.service: skype-for-business-online ms.collection: Adm_Skype4B_Online ms.audience: Admin appliesto: Skype for Business localization_priority: Normal f1keywords: None ms.custom: PowerShell description: "Use PowerShell to manage inbound call blocking in Skype for Business Online."</span></span>
---

 # <a name="block-inbound-calls"></a><span data-ttu-id="365b3-102">阻止入站的呼叫</span><span class="sxs-lookup"><span data-stu-id="365b3-102">Block Inbound Calls</span></span>

<span data-ttu-id="365b3-103">为业务联机调用计划的 Skype 现在支持阻止从公用电话交换网 (PSTN) 的入站调用。</span><span class="sxs-lookup"><span data-stu-id="365b3-103">Skype for Business Online Calling Plans now supports blocking of inbound calls from the public switched telephone network (PSTN).</span></span> <span data-ttu-id="365b3-104">此功能允许号码的模式，以定义以便的每个传入 PSTN 呼叫者 ID 调用租户的租户全局列表可以用于匹配对照列表检查。</span><span class="sxs-lookup"><span data-stu-id="365b3-104">This feature allows a tenant global list of number patterns to be defined so that the caller ID of every incoming PSTN call to the tenant can be checked against the list for a match.</span></span> <span data-ttu-id="365b3-105">如果进行匹配时，被拒绝的传入呼叫。</span><span class="sxs-lookup"><span data-stu-id="365b3-105">If a match is made, an incoming call is rejected.</span></span> 

<span data-ttu-id="365b3-106">此入站的呼叫阻止功能仅适用于源自 PSTN 的入站呼叫并仅适用于在租户全局范围在每个用户分别上不可用。</span><span class="sxs-lookup"><span data-stu-id="365b3-106">This inbound call blocking feature only works on inbound calls originating from the PSTN and only works on a tenant global basis and is not available on a per user basis.</span></span>

<span data-ttu-id="365b3-107">此功能尚不可用的直接路由。</span><span class="sxs-lookup"><span data-stu-id="365b3-107">This feature is not yet available for Direct Routing.</span></span>

><span data-ttu-id="365b3-108">[注意]阻止呼叫者可能会遇到略有不同行为时其已被阻止。</span><span class="sxs-lookup"><span data-stu-id="365b3-108">[Note] Blocked callers may experience slightly different behaviors when they have been blocked.</span></span> <span data-ttu-id="365b3-109">将基于行为阻止呼叫者的运营商如何处理呼叫不允许成功完成的通知。</span><span class="sxs-lookup"><span data-stu-id="365b3-109">The behavior will be based on how the blocked caller’s carrier handles the notification that the call is not allowed to be successfully completed.</span></span> <span data-ttu-id="365b3-110">示例可能包括运营商消息指出拨出，无法完成呼叫或放呼叫。</span><span class="sxs-lookup"><span data-stu-id="365b3-110">Examples may include a carrier message stating the call cannot be completed as dialed, or simply dropping the call.</span></span>

## <a name="call-blocking-admin-controls-and-information"></a><span data-ttu-id="365b3-111">阻止管理控件和信息的呼叫</span><span class="sxs-lookup"><span data-stu-id="365b3-111">Call Blocking Admin Controls and Information</span></span>
<span data-ttu-id="365b3-112">仅使用 PowerShell 提供管理阻止的号码的控件。</span><span class="sxs-lookup"><span data-stu-id="365b3-112">Admin controls for blocking numbers are provided using PowerShell only.</span></span> <span data-ttu-id="365b3-113">号码块模式定义为正则表达式模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-113">Number block patterns are defined as regular expression patterns.</span></span> <span data-ttu-id="365b3-114">表达式的顺序并不重要 – 在列表中匹配的第一个模式将导致呼叫被阻止。</span><span class="sxs-lookup"><span data-stu-id="365b3-114">The order of the expressions is unimportant – the first pattern matched in the list will result in the call being blocked.</span></span> <span data-ttu-id="365b3-115">新的数字或模式添加或删除被阻止呼叫者列表可能需要多达 24 小时到要变为活动状态的模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-115">A new number or pattern added or removed in the blocked callers list may take up to 24 hours to for the pattern to become active.</span></span>

## <a name="call-blocking-powershell-commands"></a><span data-ttu-id="365b3-116">调用阻止 PowerShell 命令</span><span class="sxs-lookup"><span data-stu-id="365b3-116">Call Blocking PowerShell Commands</span></span>

<span data-ttu-id="365b3-117">*InboundBlockedNumberPattern*通过**新建**、**获取**、**设置**和**删除**的*CsInboundBlockedNumberPattern*命令管理号码模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-117">*InboundBlockedNumberPattern* Number patterns are managed via the *CsInboundBlockedNumberPattern* commands **New**, **Get**, **Set**, and **Remove**.</span></span>  

<span data-ttu-id="365b3-118">您可以使用这些 cmdlet，包括切换的给定模式激活的功能来管理给定的模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-118">You can manage a given pattern by using these cmdlets, including the ability to toggle the activation of a given pattern.</span></span>
- <span data-ttu-id="365b3-119">*Get CsInboundBlockedNumberPattern*返回所有被阻止的号码模式添加到每个包括名称、 说明、 已启用 (True/False) 和模式租户列表的列表。</span><span class="sxs-lookup"><span data-stu-id="365b3-119">*Get-CsInboundBlockedNumberPattern* Returns a list of all blocked number patterns added to the tenant list including Name, Description, Enabled (True/False), and Pattern for each.</span></span>
- <span data-ttu-id="365b3-120">*新 CsInboundBlockedNumberPattern*向租户列表中被阻止的号码模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-120">*New-CsInboundBlockedNumberPattern* Adds a blocked number pattern to the tenant list.</span></span>
- <span data-ttu-id="365b3-121">*删除 CsInboundBlockedNumberPattern*从租户列表中删除被阻止的号码模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-121">*Remove-CsInboundBlockedNumberPattern* Removes a blocked number pattern from the tenant list.</span></span>
- <span data-ttu-id="365b3-122">*设置 CsInboundBlockedNumberPattern*修改租户列表中的阻止号码模式的一个或多个参数。</span><span class="sxs-lookup"><span data-stu-id="365b3-122">*Set-CsInboundBlockedNumberPattern* Modifies one or more parameters of a blocked number pattern in the tenant list.</span></span>
- <span data-ttu-id="365b3-123">*TenantBlockedCallingNumbers*查看和激活整个调用阻止功能是通过 CsTenantBlockingCallingNumbers 命令获取和设置进行管理。</span><span class="sxs-lookup"><span data-stu-id="365b3-123">*TenantBlockedCallingNumbers* The viewing and activation of the entire call blocking feature is managed via the CsTenantBlockingCallingNumbers commands Get and Set.</span></span> 
- <span data-ttu-id="365b3-124">*Get CsTenantBlockedCallingNumbers*返回全局阻止号码列表包括启用 (True/False) 的参数。</span><span class="sxs-lookup"><span data-stu-id="365b3-124">*Get-CsTenantBlockedCallingNumbers* Returns the parameters for the global blocked number list including Enabled (True/False).</span></span> <span data-ttu-id="365b3-125">没有无法手动以外修改来关闭该功能完全上/的单个全局租户策略。</span><span class="sxs-lookup"><span data-stu-id="365b3-125">There is a single global tenant policy that cannot be modified manually other than to turn the feature completely on/off.</span></span>
- <span data-ttu-id="365b3-126">*设置 CsTenantBlockedCallingNumbers*允许修改全局租户阻止呼叫在租户级别打开/关闭。</span><span class="sxs-lookup"><span data-stu-id="365b3-126">*Set-CsTenantBlockedCallingNumbers* Allows modifying the global tenant blocked calls to be turned on/off at the tenant level.</span></span>

### <a name="examples"></a><span data-ttu-id="365b3-127">示例</span><span class="sxs-lookup"><span data-stu-id="365b3-127">Examples</span></span>
#### <a name="blocking-a-number"></a><span data-ttu-id="365b3-128">阻止数字</span><span class="sxs-lookup"><span data-stu-id="365b3-128">Blocking a Number</span></span>

<span data-ttu-id="365b3-129">本示例中，-启用和-说明参数是可选的：</span><span class="sxs-lookup"><span data-stu-id="365b3-129">In this example, the -Enabled and -Description parameters are optional:</span></span>

`New-CsInboundBlockedNumberPattern -Name “<name>” -Enabled $True -Description “<description>” -Pattern “^[+]?13125550000”`

 <span data-ttu-id="365b3-130">创建新的模式将默认情况下添加模式为已启用，并说明始终是和可选字段，用于提供了详细信息。</span><span class="sxs-lookup"><span data-stu-id="365b3-130">Creating a new pattern will by default add the pattern as enabled, and the description is always and optional field to provide more information.</span></span> 

<span data-ttu-id="365b3-131">我们建议您提供有意义的名称，可以轻松地理解模式已添加为什么。</span><span class="sxs-lookup"><span data-stu-id="365b3-131">We recommend that you provide a meaningful name to easily understand why the pattern was added.</span></span> <span data-ttu-id="365b3-132">对于只需阻止垃圾邮件号码，视为相同命名规则匹配的号码模式为正在，且在说明根据需要添加其他信息。</span><span class="sxs-lookup"><span data-stu-id="365b3-132">In the case of simply blocking spam numbers, considered naming the rule the same as the number pattern being matched, and add additional information in the description as required.</span></span>

<span data-ttu-id="365b3-133">使用正则表达式 (regex) 匹配模式。</span><span class="sxs-lookup"><span data-stu-id="365b3-133">Patterns are matched using Regular Expressions (regex).</span></span> <span data-ttu-id="365b3-134">允许的前测试和验证复制时间。</span><span class="sxs-lookup"><span data-stu-id="365b3-134">Allow for replication time before testing and validating.</span></span>

#### <a name="allowing-a-number"></a><span data-ttu-id="365b3-135">允许使用数量</span><span class="sxs-lookup"><span data-stu-id="365b3-135">Allowing a Number</span></span>

<span data-ttu-id="365b3-136">本示例中，identity 参数是必需的：`Remove-CsInboundBlockedNumberPattern -Identity “<identity>”`</span><span class="sxs-lookup"><span data-stu-id="365b3-136">In this example, the identity parameter is  required: `Remove-CsInboundBlockedNumberPattern -Identity “<identity>”`</span></span>
 
<span data-ttu-id="365b3-137">如果不知道标识，使用*Get-CsInb undBlockedNumberPattern* cmdlet 可以先找到正确的模式，并记下标识。</span><span class="sxs-lookup"><span data-stu-id="365b3-137">If the Identity is not known, use the *Get-CsInb undBlockedNumberPattern* cmdlet to first locate the proper pattern and note the Identity.</span></span> <span data-ttu-id="365b3-138">然后，运行*删除*cmdlet 并传递相应的 Identity 值。</span><span class="sxs-lookup"><span data-stu-id="365b3-138">Then, run the *Remove* cmdlet and pass the appropriate Identity value.</span></span>

<span data-ttu-id="365b3-139">允许的前测试和验证复制时间。</span><span class="sxs-lookup"><span data-stu-id="365b3-139">Allow for replication time before testing and validating.</span></span>
#### <a name="view-all-number-patterns"></a><span data-ttu-id="365b3-140">查看所有的号码模式</span><span class="sxs-lookup"><span data-stu-id="365b3-140">View all Number Patterns</span></span>
<span data-ttu-id="365b3-141">运行此 cmdlet 将返回租户的所有列表输入阻止号码：`Get-CsInboundBlockedNumberPattern`</span><span class="sxs-lookup"><span data-stu-id="365b3-141">Running this cmdlet will return a list of all entered blocked numbers for a tenant: `Get-CsInboundBlockedNumberPattern`</span></span>

<span data-ttu-id="365b3-142">使用内置 PowerShell 筛选功能来分析所需的返回的值。</span><span class="sxs-lookup"><span data-stu-id="365b3-142">Use built-in PowerShell filtering abilities to parse the returned values as required.</span></span>

#### <a name="a-note-on-regex"></a><span data-ttu-id="365b3-143">正则表达式上一条注释</span><span class="sxs-lookup"><span data-stu-id="365b3-143">A Note on Regex</span></span>
<span data-ttu-id="365b3-144">如上文所述，是通过模式匹配的阻止呼叫者使用正则表达式 (regex)。</span><span class="sxs-lookup"><span data-stu-id="365b3-144">As stated earlier, the pattern matching for blocking callers is done by using Regular Expressions (regex).</span></span> <span data-ttu-id="365b3-145">有多个工具可以联机帮助验证正则表达式模式匹配。</span><span class="sxs-lookup"><span data-stu-id="365b3-145">There are multiple tools available online to help validate a regex pattern match.</span></span> <span data-ttu-id="365b3-146">如果您不熟悉正则表达式模式，建议您花一些时间来熟悉基础知识，以确保获取预期的结果，使用工具，用于验证模式匹配，然后将新阻止号码的匹配项添加到您的租户。</span><span class="sxs-lookup"><span data-stu-id="365b3-146">If you are not familiar with regex patterns, we recommend that you take some time to familiarize yourself with the basics and to make sure you get expected results, use a tool for validating pattern matches before you add new blocked number matches to your tenant.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="365b3-147">相关主题</span><span class="sxs-lookup"><span data-stu-id="365b3-147">Related topics</span></span>
[<span data-ttu-id="365b3-148">设置您的计算机的业务联机管理使用 Windows PowerShell 的 Skype</span><span class="sxs-lookup"><span data-stu-id="365b3-148">Set up your computer for skype for business online management using Windows PowerShell</span></span>](https://docs.microsoft.com/en-us/SkypeForBusiness/set-up-your-computer-for-windows-powershell/set-up-your-computer-for-windows-powershell )
