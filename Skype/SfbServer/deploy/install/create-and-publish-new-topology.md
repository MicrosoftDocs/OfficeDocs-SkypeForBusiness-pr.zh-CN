---
title: 在 Skype for Business Server 中创建和发布新拓扑
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
ms.date: 2/15/2018
audience: ITPro
ms.topic: quickstart
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Admin
ms.custom: ''
ms.assetid: 451c41a1-b8c5-4dc3-9e48-0da9ed5381a1
description: 摘要：了解如何在安装 Skype for Business Server 之前创建、发布和验证新拓扑。 从 Microsoft Evaluation Center 下载 Skype for Business Server 的免费试用版 https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server ：。
ms.openlocfilehash: 3a7ffd600ae3929b00018587296b5b673c221eb6
ms.sourcegitcommit: 01087be29daa3abce7d3b03a55ba5ef8db4ca161
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/23/2021
ms.locfileid: "51104888"
---
# <a name="create-and-publish-new-topology-in-skype-for-business-server"></a><span data-ttu-id="edcfc-104">在 Skype for Business Server 中创建和发布新拓扑</span><span class="sxs-lookup"><span data-stu-id="edcfc-104">Create and publish new topology in Skype for Business Server</span></span>
 
<span data-ttu-id="edcfc-105">**摘要：** 了解如何在安装 Skype for Business Server 之前创建、发布和验证新拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-105">**Summary:** Learn how to create, publish, and verify a new topology before you install Skype for Business Server.</span></span> <span data-ttu-id="edcfc-106">从 Microsoft Evaluation Center 下载 Skype for Business Server 的免费试用版 [https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server](https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server) ：。</span><span class="sxs-lookup"><span data-stu-id="edcfc-106">Download a free trial of Skype for Business Server from the Microsoft Evaluation center at: [https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server](https://www.microsoft.com/evalcenter/evaluate-skype-for-business-server).</span></span>
  
<span data-ttu-id="edcfc-107">必须先创建拓扑并发布拓扑，然后才能在拓扑中的每台服务器上安装 Skype for Business Server 系统。</span><span class="sxs-lookup"><span data-stu-id="edcfc-107">Before you can install the Skype for Business Server system on each of the servers in the topology, you must create a topology and publish it.</span></span> <span data-ttu-id="edcfc-108">发布拓扑时，将拓扑信息加载到中央管理存储数据库中。</span><span class="sxs-lookup"><span data-stu-id="edcfc-108">When you publish a topology, you are loading the topology information into the Central Management Store database.</span></span> <span data-ttu-id="edcfc-109">如果这是 Enterprise Edition 池，则首次发布新拓扑时将创建中央管理存储数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-109">If this is an Enterprise Edition pool, you are creating the Central Management Store database the first time you publish a new topology.</span></span> <span data-ttu-id="edcfc-110">如果这是 Standard Edition，则需要在发布拓扑之前从部署向导运行"准备第一个 Standard Edition Server"过程。</span><span class="sxs-lookup"><span data-stu-id="edcfc-110">If this is Standard Edition, you will need to run the Prepare First Standard Edition Server process from the Deployment Wizard before you publish a topology.</span></span> <span data-ttu-id="edcfc-111">这将通过安装 Express Edition SQL Server并创建中央管理存储来准备 Standard Edition。</span><span class="sxs-lookup"><span data-stu-id="edcfc-111">This prepares for Standard Edition by installing a SQL Server Express Edition instance and creating the Central Management Store.</span></span> <span data-ttu-id="edcfc-112">可以按任意顺序执行步骤 1 到步骤 5。</span><span class="sxs-lookup"><span data-stu-id="edcfc-112">You can do steps 1 through 5 in any order.</span></span> <span data-ttu-id="edcfc-113">但是，您必须按照图中的概述顺序执行步骤 6、7 和 8 以及步骤 1 到步骤 5 之后。</span><span class="sxs-lookup"><span data-stu-id="edcfc-113">However, you must do steps 6, 7, and 8 in order, and after steps 1 through 5, as outlined in the diagram.</span></span> <span data-ttu-id="edcfc-114">How to create and publish a new topology is described in step 6 of 8.</span><span class="sxs-lookup"><span data-stu-id="edcfc-114">How to create and publish a new topology is described in step 6 of 8.</span></span>
  
![概述图表](../../media/c5c09ba2-c98b-4194-9857-7c3087c5560e.png)
  
## <a name="create-and-publish-new-topology"></a><span data-ttu-id="edcfc-116">创建和发布新拓扑</span><span class="sxs-lookup"><span data-stu-id="edcfc-116">Create and publish new topology</span></span>

<span data-ttu-id="edcfc-117">Skype for Business Server 拓扑生成器可用于设计、定义、配置和发布拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-117">You can use Skype for Business Server Topology Builder to design, define, configure, and publish topologies.</span></span> <span data-ttu-id="edcfc-118">此工具是在您安装本文前面介绍的管理工具时安装的。</span><span class="sxs-lookup"><span data-stu-id="edcfc-118">This tool was installed when you installed Administrative Tools earlier in the article.</span></span> <span data-ttu-id="edcfc-119">创建拓扑时，可以做出许多不同的选择。</span><span class="sxs-lookup"><span data-stu-id="edcfc-119">There are many different choices you can make when you create a topology.</span></span> <span data-ttu-id="edcfc-120">在此过程中，您将创建具有会议的基本拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-120">In this procedure, you will create a basic topology with conferencing.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="edcfc-121">Skype for Business Server SQL Server才能运行。</span><span class="sxs-lookup"><span data-stu-id="edcfc-121">Skype for Business Server requires SQL Server in order to operate.</span></span> <span data-ttu-id="edcfc-122">主数据库称为中央管理存储。</span><span class="sxs-lookup"><span data-stu-id="edcfc-122">The primary databases are known as the Central Management Store.</span></span> <span data-ttu-id="edcfc-123">如果要部署 Enterprise Edition，则使用以下步骤发布拓扑时将创建这些数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-123">If you are deploying Enterprise Edition, these databases are created when you publish the topology by using the steps below.</span></span> <span data-ttu-id="edcfc-124">在这种情况下，拓扑生成器会要求您提供与安装SQL Server信息。</span><span class="sxs-lookup"><span data-stu-id="edcfc-124">In this case, Topology Builder will ask you for the connection information to a SQL Server installation.</span></span> <span data-ttu-id="edcfc-125">如果计划部署 Standard Edition，则需要先安装 SQL Server Express Edition，然后才能定义和发布新拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-125">If you are planning to deploy Standard Edition, you will need to install SQL Server Express Edition before you define and publish the new topology.</span></span> <span data-ttu-id="edcfc-126">若要SQL Server Express Edition，应在将充当前端的服务器上打开部署向导，然后运行"准备第一台 Standard Edition Server"。</span><span class="sxs-lookup"><span data-stu-id="edcfc-126">To install SQL Server Express Edition, you should open the Deployment Wizard on the server that will act as the Front End, and then run Prepare First Standard Edition Server.</span></span> <span data-ttu-id="edcfc-127">单击"准备第一台 Standard Edition Server"时，部署向导会自动SQL Server Express Edition 并创建中央管理存储数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-127">When you click Prepare First Standard Edition Server, the Deployment Wizard automatically installs SQL Server Express Edition and creates the Central Management Store databases.</span></span> 
  
### <a name="create-a-new-topology"></a><span data-ttu-id="edcfc-128">创建新拓扑</span><span class="sxs-lookup"><span data-stu-id="edcfc-128">Create a new topology</span></span>

1. <span data-ttu-id="edcfc-129">以具有拓扑生成器访问权限的标准用户登录。</span><span class="sxs-lookup"><span data-stu-id="edcfc-129">Log in as a standard user with access to Topology Builder.</span></span>
    
2. <span data-ttu-id="edcfc-130">打开 Skype for Business Server 拓扑生成器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-130">Open Skype for Business Server Topology Builder.</span></span>
    
3. <span data-ttu-id="edcfc-131">选择 **"新建拓扑"，** 然后单击 **"确定**"。</span><span class="sxs-lookup"><span data-stu-id="edcfc-131">Select **New Topology**, and click **OK**..</span></span>
    
4. <span data-ttu-id="edcfc-132">选择拓扑配置文件的位置和文件名。</span><span class="sxs-lookup"><span data-stu-id="edcfc-132">Select a location and file name for the topology configuration file.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="edcfc-133">拓扑配置另存为拓扑生成器 XML (.tbxml) 文件。</span><span class="sxs-lookup"><span data-stu-id="edcfc-133">The topology configuration is saved as a Topology Builder XML (.tbxml) file.</span></span> <span data-ttu-id="edcfc-134">发布拓扑时，将配置信息从文件推送到SQL Server数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-134">When you publish a topology, you are pushing the configuration information from the file to the SQL Server database.</span></span> <span data-ttu-id="edcfc-135">将来打开拓扑生成器时，可以将现有配置从 SQL Server 直接下载到拓扑生成器中，并将其发布回 SQL Server 或将其另存为拓扑生成器配置文件。</span><span class="sxs-lookup"><span data-stu-id="edcfc-135">When you open Topology Builder in the future, you can download the existing configuration from SQL Server directly into Topology Builder and either publish it back to SQL Server or save it as a Topology Builder configuration file.</span></span> 
  
5. <span data-ttu-id="edcfc-136">在"**定义主域"屏幕上**，输入 **主 SIP 域**，然后单击"下一 **步"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-136">On the **Define the primary domain screen**, enter the **primary SIP domain**, and click **Next**.</span></span> <span data-ttu-id="edcfc-137">在此例中，我们使用 **contoso.local，** 如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-137">In this example, we are using **contoso.local**, as shown in the figure.</span></span>
    
     ![定义主 sip 域。](../../media/353e6b38-485f-4042-8585-aefa6c74b554.png)
  
6. <span data-ttu-id="edcfc-139">添加任何其他支持的 SIP 域，然后单击"下一 **步"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-139">Add any additional supported SIP domains, and then click **Next**.</span></span>
    
7. <span data-ttu-id="edcfc-140">为网站 **位置** 的第 **一** 个 (输入名称和) ，然后单击"下一步"，如图所示。 </span><span class="sxs-lookup"><span data-stu-id="edcfc-140">Enter a **Name** and **Description** for the first site (location), and then click **Next**, as shown in the figure.</span></span>
    
     ![定义第一个网站 (位置) 。](../../media/d8b6c54a-2011-4efb-97fb-a4de0f11303c.png)
  
8. <span data-ttu-id="edcfc-142">输入 **网站的城市\*\*\*\*、省/市**/自治区和国家 **/地区** 代码，然后单击"下一步 **"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-142">Enter the **City**, **State/Province**, and **Country/Region Code** for the site, and then click **Next**.</span></span>
    
9. <span data-ttu-id="edcfc-143">单击 **"** 完成"完成定义新拓扑的过程。</span><span class="sxs-lookup"><span data-stu-id="edcfc-143">Click **Finish** to complete the process of defining a new topology.</span></span> <span data-ttu-id="edcfc-144">"新建前端向导"将自动启动。</span><span class="sxs-lookup"><span data-stu-id="edcfc-144">The New Front End Wizard launches automatically.</span></span>
    
### <a name="define-a-front-end-pool-or-standard-edition-server"></a><span data-ttu-id="edcfc-145">定义前端池或 Standard Edition Server</span><span class="sxs-lookup"><span data-stu-id="edcfc-145">Define a Front End pool or Standard Edition server</span></span>

1. <span data-ttu-id="edcfc-146">查看向导先决条件，然后单击"下一 **步"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-146">Review the wizard prerequisites, and then click **Next**.</span></span>
    
2. <span data-ttu-id="edcfc-147">在池的 FQDN (输入完全限定的域名) ，然后选择 **"Enterprise Edition 前端** 池"或 **"Standard Edition Server"，** 然后单击"下 **一步"，** 如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-147">Enter the fully qualified domain name (FQDN) of the pool, and select either **Enterprise Edition Front End Pool** or **Standard Edition Server**, and then click **Next**, as shown in the figure.</span></span>
    
    > [!TIP]
    > <span data-ttu-id="edcfc-148">Skype for Business Server Enterprise Edition 可以包括多台协同工作以提供前端角色的服务器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-148">Skype for Business Server Enterprise Edition can include multiple servers working together to provide the Front End role.</span></span> <span data-ttu-id="edcfc-149">当使用多个服务器来履行角色时，它称为池。</span><span class="sxs-lookup"><span data-stu-id="edcfc-149">When multiple servers are used to fulfill the role, it is called a pool.</span></span> <span data-ttu-id="edcfc-150">因此，协同工作以提供前端角色的多个服务器也称为前端池。</span><span class="sxs-lookup"><span data-stu-id="edcfc-150">Thus, multiple servers working together to provide the Front End role is also referred to as the Front End pool.</span></span> <span data-ttu-id="edcfc-151">Skype for Business Server Standard Edition 只能包含一台服务器来提供前端角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-151">Skype for Business Server Standard Edition can include only a single server to provide the Front End role.</span></span> <span data-ttu-id="edcfc-152">通常，即使只有一台服务器提供角色，也通常引用前端池。</span><span class="sxs-lookup"><span data-stu-id="edcfc-152">It is common to refer to the Front End pool even if only a single server is providing the role.</span></span> 
  
     ![定义前端池。](../../media/c1447557-261e-4260-a362-ab8d19070eb9.png)
  
3. <span data-ttu-id="edcfc-154">输入池中所有 (FQDN) 完全限定的域名，然后单击"下一步"，如图所示。 </span><span class="sxs-lookup"><span data-stu-id="edcfc-154">Enter the fully qualified domain names (FQDNs) of all computers in the pool, and then click **Next** as shown in the figure.</span></span>
    
     ![定义池中的计算机。](../../media/1106b4f3-8745-485b-b495-f885a5dfefda.png)
  
4. <span data-ttu-id="edcfc-156">选择此拓扑中将包含的功能，然后单击"下一步 **"，如图** 所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-156">Select the features that will be included in this topology, and then click **Next** as shown in the figure.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="edcfc-157">Skype for Business Server 包括许多高级功能。</span><span class="sxs-lookup"><span data-stu-id="edcfc-157">Skype for Business Server includes many advanced features.</span></span> <span data-ttu-id="edcfc-158">查看要使用的每个特定功能的计划和部署文档。</span><span class="sxs-lookup"><span data-stu-id="edcfc-158">Review planning and deployment documentation for each specific feature you want to use.</span></span> 
  
     ![选择部署功能。](../../media/77257588-d0e1-4517-a12a-869ffe009353.png)
  
5. <span data-ttu-id="edcfc-160">在" **选择并排服务器** 角色"页上，可以选择在前端服务器上并排中介服务器，也可以选择将其部署为独立服务器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-160">On the **Select collocated server roles** page, you can choose to collocate the Mediation server on the Front End server, or you can choose to deploy it as a standalone server.</span></span>
    
    <span data-ttu-id="edcfc-161">如果要在 Enterprise Edition 前端池上并并中介服务器，请确保选中该复选框。</span><span class="sxs-lookup"><span data-stu-id="edcfc-161">If you intend to collocate the Mediation server on the Enterprise Edition Front End pool, ensure the check box is selected.</span></span> <span data-ttu-id="edcfc-162">将在池服务器上部署服务器角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-162">The server role will be deployed on the pool servers.</span></span> <span data-ttu-id="edcfc-163">如果要将中介服务器部署为独立服务器，请清除相应的复选框。</span><span class="sxs-lookup"><span data-stu-id="edcfc-163">If you intend to deploy the Mediation server as a stand-alone server, clear the appropriate check box.</span></span> <span data-ttu-id="edcfc-164">完全部署前端服务器后，您将在单独的部署步骤中部署中介服务器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-164">You will deploy the Mediation server in a separate deployment step after you completely deploy the Front End server.</span></span> <span data-ttu-id="edcfc-165">有关并置的规划详细信息，请参阅[Topology Basics for Skype for Business Server。](../../plan-your-deployment/topology-basics/topology-basics.md)</span><span class="sxs-lookup"><span data-stu-id="edcfc-165">For planning details about a collocation, see [Topology Basics for Skype for Business Server](../../plan-your-deployment/topology-basics/topology-basics.md).</span></span>
    
6. <span data-ttu-id="edcfc-166">通过使用" **将服务器角色与前端** 池关联"页，可以定义服务器角色并将其与前端池关联。</span><span class="sxs-lookup"><span data-stu-id="edcfc-166">By using the **Associate server roles with this Front End pool** page, you can define and associate server roles with the Front End pool.</span></span> <span data-ttu-id="edcfc-167">以下角色可用：</span><span class="sxs-lookup"><span data-stu-id="edcfc-167">The following role is available:</span></span>
    
    <span data-ttu-id="edcfc-168">**启用边缘池** 定义并关联单个边缘服务器或边缘服务器池。</span><span class="sxs-lookup"><span data-stu-id="edcfc-168">**Enable an Edge pool** Defines and associates a single Edge Server or a pool of Edge Servers.</span></span> <span data-ttu-id="edcfc-169">边缘服务器可促进组织内部用户与组织外部人员（包括联盟用户）之间的通信和协作。</span><span class="sxs-lookup"><span data-stu-id="edcfc-169">An Edge Server facilitates communication and collaboration between users inside the organization and people outside the organization, including federated users.</span></span>
    
    <span data-ttu-id="edcfc-170">有两种可能的方案可用于部署和关联服务器角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-170">There are two possible scenarios that you can use to deploy and associate the server roles.</span></span>
    
    <span data-ttu-id="edcfc-171">方案一，为新的安装定义新的拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-171">For scenario one, you are defining a new topology for a new installation.</span></span> <span data-ttu-id="edcfc-172">可以通过以下两种方法之一完成安装：</span><span class="sxs-lookup"><span data-stu-id="edcfc-172">You can approach the installation in one of the two following ways:</span></span>
    
   - <span data-ttu-id="edcfc-173">将复选框保留为清除，并定义拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-173">Leave the check box clear, and define the topology.</span></span> <span data-ttu-id="edcfc-174">发布、配置和测试前端服务器角色和后端服务器角色后，可以再次运行拓扑生成器以向拓扑中添加角色服务器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-174">After you have published, configured, and tested the Front End and Back End Server roles, you can run Topology Builder again to add the role servers to the topology.</span></span> <span data-ttu-id="edcfc-175">通过使用此策略，可以测试前端池和运行 SQL Server，而不需要其他角色的额外复杂性。</span><span class="sxs-lookup"><span data-stu-id="edcfc-175">By using this strategy, you can test the Front End pool and the server running SQL Server without additional complications from additional roles.</span></span> <span data-ttu-id="edcfc-176">完成初始测试后，可以再次运行拓扑生成器以选择需要部署的角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-176">After you have completed your initial testing, you can run Topology Builder again to select the roles you need to deploy.</span></span>
    
   - <span data-ttu-id="edcfc-177">选择需要安装的角色，然后设置硬件以适应所选择的角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-177">Select roles that you need to install, and then set up the hardware to accommodate the selected roles.</span></span>
    
     <span data-ttu-id="edcfc-178">对于方案二，您具有现有部署，并且您的基础结构已准备好使用新角色，或者您需要将现有角色与新的前端服务器关联。</span><span class="sxs-lookup"><span data-stu-id="edcfc-178">For scenario two, you have an existing deployment, and your infrastructure is ready for new roles, or you need to associate existing roles with a new Front End server.</span></span>
    
   - <span data-ttu-id="edcfc-179">在这种情况下，您将选择要部署的角色或将其与新的前端服务器关联。</span><span class="sxs-lookup"><span data-stu-id="edcfc-179">In this case, you will select the roles that you intend to deploy or associate with the new Front End server.</span></span> <span data-ttu-id="edcfc-180">无论在哪种情况下，都需要定义角色，设置任何所需硬件，然后继续安装。</span><span class="sxs-lookup"><span data-stu-id="edcfc-180">In either case, you will proceed with the definition of the roles, set up any needed hardware, and proceed with the installation.</span></span>
    
7. <span data-ttu-id="edcfc-181">接下来，将SQL Server拓扑中使用的存储。</span><span class="sxs-lookup"><span data-stu-id="edcfc-181">Next, you will define the SQL Server store that will be used with the topology.</span></span> <span data-ttu-id="edcfc-182">此示例使用 Default 实例。</span><span class="sxs-lookup"><span data-stu-id="edcfc-182">In this example, we use the Default instance.</span></span> <span data-ttu-id="edcfc-183">有关高可用性SQL Server，请参阅 Plan for high availability and [disaster recovery in Skype for Business Server。](../../plan-your-deployment/high-availability-and-disaster-recovery/high-availability-and-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="edcfc-183">For more information about SQL Server features, such as High Availability, see [Plan for high availability and disaster recovery in Skype for Business Server](../../plan-your-deployment/high-availability-and-disaster-recovery/high-availability-and-disaster-recovery.md).</span></span>
    
   - <span data-ttu-id="edcfc-184">若要使用已在拓扑中定义的现有 SQL Server 存储，请选择“SQL 存储”中的一个实例。</span><span class="sxs-lookup"><span data-stu-id="edcfc-184">To use an existing SQL Server store that has already been defined in your topology, select an instance from **SQL store**.</span></span>
    
   - <span data-ttu-id="edcfc-185">若要定义新的 **SQL Server存储池** 信息的实例，请单击"新建"，然后在"定义新的SQL Server存储"对话框中指定 SQL **FQDN。** </span><span class="sxs-lookup"><span data-stu-id="edcfc-185">To define a new SQL Server instance to store pool information, click **New**, and then specify the **SQL Server FQDN** in the **Define New SQL Store** dialog box.</span></span>
    
   - <span data-ttu-id="edcfc-186">要指定 SQL Server 实例的名称，请选择“命名实例”，然后指定实例的名称。</span><span class="sxs-lookup"><span data-stu-id="edcfc-186">To specify the name of a SQL Server instance, select **Named Instance**, and then specify the name of the instance.</span></span>
    
   - <span data-ttu-id="edcfc-187">要使用默认实例，请单击“默认实例”。</span><span class="sxs-lookup"><span data-stu-id="edcfc-187">To use the default instance, click **Default instance**.</span></span>
    
   - <span data-ttu-id="edcfc-188">若要使用SQL镜像，请选择"启用 **SQL镜像"，** 然后选择现有实例，或创建新实例。</span><span class="sxs-lookup"><span data-stu-id="edcfc-188">To use SQL Mirroring, select **Enable SQL mirroring**, and select an existing instance, or create a new instance.</span></span>

     > [!NOTE]
     > <span data-ttu-id="edcfc-189">SQL镜像在 Skype for Business Server 2015 中可用，但在 Skype for Business Server 2019 中不再受支持。</span><span class="sxs-lookup"><span data-stu-id="edcfc-189">SQL Mirroring is available in Skype for Business Server 2015 but is no longer supported in Skype for Business Server 2019.</span></span> <span data-ttu-id="edcfc-190">AlwaysOn 可用性组、AlwaysOn 故障转移群集实例 (FCI) 和 SQL 故障转移群集方法在 Skype for Business Server 2019 中是首选。</span><span class="sxs-lookup"><span data-stu-id="edcfc-190">The  AlwaysOn Availability Groups, AlwaysOn Failover Cluster Instances (FCI), and SQL failover clustering methods are preferred with Skype for Business Server 2019.</span></span>
    
     <span data-ttu-id="edcfc-191">对于此示例，我们输入 SQL Server **FQDN，** 并配置任何相关的高可用性设置，然后单击 **"确定**"，如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-191">For this example, we enter the **SQL Server FQDN**, and configure any relevant high availability settings, and then click **OK**, as shown in the figure.</span></span>
    
     ![创建SQL Server存储。](../../media/12822cf9-8608-43c0-94ce-2ca8b3a0ffd5.png)
  
8. <span data-ttu-id="edcfc-193">决定是否要启用镜像SQL Server或SQL Server镜像见证，然后单击"下一步 **"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-193">Decide if you want to enable SQL Server store mirroring or SQL Server mirroring witness, and then click **Next**.</span></span>
    
9. <span data-ttu-id="edcfc-194">定义想要使用的文件共享。</span><span class="sxs-lookup"><span data-stu-id="edcfc-194">Define the file share that you want to use.</span></span>
    
   - <span data-ttu-id="edcfc-195">要使用已经在拓扑中定义的文件共享，请选择“使用先前定义的文件共享”。</span><span class="sxs-lookup"><span data-stu-id="edcfc-195">To use a file share that has already been defined in your topology, select **Use a previously defined file share**.</span></span>
    
   - <span data-ttu-id="edcfc-196">要定义新文件共享，请选择“定义新的文件共享”，在“文件服务器 FQDN”框中，输入要放置文件共享的现有文件服务器的 FQDN，然后在“文件共享”框中输入文件共享的名称。</span><span class="sxs-lookup"><span data-stu-id="edcfc-196">To define a new file share, select **Define a new file share**, in the **File Server FQDN** box, enter the FQDN of the existing file server where the file share is to reside, and then enter a name for the file share in the **File Share** box.</span></span>
    
     <span data-ttu-id="edcfc-197">对于此示例，我们将单击"定义 **新的文件存储"，** 输入文件服务器 **FQDN** 和 **文件共享**，然后单击"下一步 **"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-197">For this example, we will click **Define a new file store**, enter the **file server FQDN** and **file share**, and then click **Next**.</span></span>
    
     > [!NOTE]
     > <span data-ttu-id="edcfc-198">Skype for Business Server 的文件共享可以并并，但出于性能原因不建议这样做。</span><span class="sxs-lookup"><span data-stu-id="edcfc-198">The file share for Skype for Business Server can be collocated but it is not recommended for performance reasons.</span></span> <span data-ttu-id="edcfc-199">请注意，此示例中的文件共享位于将充当文件共享的单个专用服务器上。</span><span class="sxs-lookup"><span data-stu-id="edcfc-199">Note that in this example, the file share has been located on a single dedicated server that will act as the file share.</span></span> <span data-ttu-id="edcfc-200">但是，建议使用其他更强大的文件共享系统，如使用 Windows Server 2012 R2 的 DFS。</span><span class="sxs-lookup"><span data-stu-id="edcfc-200">However, other more robust file share systems, such as DFS using Windows Server 2012 R2, are recommended.</span></span> <span data-ttu-id="edcfc-201">有关受支持的文件共享系统的详细信息，请参阅 [Requirements for your Skype for Business environment](../../plan-your-deployment/requirements-for-your-environment/requirements-for-your-environment.md)。</span><span class="sxs-lookup"><span data-stu-id="edcfc-201">For details about supported file share systems, see [Requirements for your Skype for Business environment](../../plan-your-deployment/requirements-for-your-environment/requirements-for-your-environment.md).</span></span> <span data-ttu-id="edcfc-202">有关创建文件共享的信息，请参阅在 Skype [for Business Server](create-a-file-share.md)中创建文件共享。</span><span class="sxs-lookup"><span data-stu-id="edcfc-202">For more information about creating the file share, see [Create a file share in Skype for Business Server](create-a-file-share.md).</span></span> <span data-ttu-id="edcfc-203">可以在尚未创建文件共享的情况下定义文件共享。</span><span class="sxs-lookup"><span data-stu-id="edcfc-203">You can define the file share without the file share having been created.</span></span> <span data-ttu-id="edcfc-204">在发布拓扑之前，您将需要在定义的位置创建文件共享。</span><span class="sxs-lookup"><span data-stu-id="edcfc-204">You will need to create the file share in the location you define before you publish the topology.</span></span> 
  
10. <span data-ttu-id="edcfc-205">在"指定 Web 服务 URL"页上，必须决定是否需要覆盖内部 Web 服务池基 URL。</span><span class="sxs-lookup"><span data-stu-id="edcfc-205">On the Specify the Web Services URL page, you must decide if you need to override the internal Web Services pool base URL.</span></span> <span data-ttu-id="edcfc-206">此覆盖的原因与负载平衡有关。</span><span class="sxs-lookup"><span data-stu-id="edcfc-206">The reason for this override has to do with load balancing.</span></span> <span data-ttu-id="edcfc-207">基本 SIP 流量可以通过简单的 DNS 负载平衡进行负载平衡。</span><span class="sxs-lookup"><span data-stu-id="edcfc-207">Basic SIP traffic can be load balanced through simple DNS load balancing.</span></span> <span data-ttu-id="edcfc-208">但是，HTTP/S Web 服务网络流量必须使用受支持的硬件或软件负载平衡解决方案。</span><span class="sxs-lookup"><span data-stu-id="edcfc-208">However, the HTTP/S Web Services network traffic must use a supported Hardware or Software load balancing solution.</span></span> <span data-ttu-id="edcfc-209">有关支持的负载平衡器，请参阅[Infrastructure for Skype for Business。](../../../SfbPartnerCertification/certification/infra-gateways.md)</span><span class="sxs-lookup"><span data-stu-id="edcfc-209">For supported load balancers, see [Infrastructure for Skype for Business](../../../SfbPartnerCertification/certification/infra-gateways.md).</span></span> <span data-ttu-id="edcfc-210">在此例中，我们将 DNS 负载平衡用于 SIP 流量和支持的软件负载平衡解决方案。</span><span class="sxs-lookup"><span data-stu-id="edcfc-210">In this example, we used DNS load balancing for SIP traffic and a supported software load balancing solution.</span></span> <span data-ttu-id="edcfc-211">由于我们按这种方式划分流量，因此需要覆盖内部 Web 服务池 FQDN。</span><span class="sxs-lookup"><span data-stu-id="edcfc-211">Because we are dividing the traffic this way, we need to override the internal Web Services pool FQDN.</span></span> <span data-ttu-id="edcfc-212">或者，如果我们有一个顶线负载平衡器并通过它发送所有流量，而不是对 SIP 流量使用 DNS 负载平衡，则不需要覆盖 Web 服务 URL。</span><span class="sxs-lookup"><span data-stu-id="edcfc-212">Alternatively, if we had a top line load balancer and sent all traffic through it instead of using DNS load balancing for SIP traffic, we would not need to override the Web Services URL.</span></span> 
    
    <span data-ttu-id="edcfc-213">在本主题的 DNS 部分中，我们为 webint.contoso.local 创建了 A 记录。</span><span class="sxs-lookup"><span data-stu-id="edcfc-213">In the DNS section of this topic, we created an A record for webint.contoso.local.</span></span> <span data-ttu-id="edcfc-214">这是我们用于 Web 服务 HTTP/S 流量的 URL，它必须经过我们设置的支持的软件负载平衡器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-214">This is the URL we are using for the web services HTTP/S traffic, and it must go through the supported software load balancer we set up.</span></span> <span data-ttu-id="edcfc-215">因此，在此例中，我们替代 URL，让 Skype for Business Server 知道所有 HTTP/S 流量应转到 webint.contoso.local，而不是 pool.contoso.local，如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-215">Therefore, in this example, we override the URL to let Skype for Business Server know that all HTTP/S traffic should go to webint.contoso.local instead of pool.contoso.local, as shown in the figure.</span></span> <span data-ttu-id="edcfc-216">有关负载平衡的更多信息，请参阅[Load balancing requirements for Skype for Business。](../../plan-your-deployment/network-requirements/load-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="edcfc-216">For more about load balancing, see [Load balancing requirements for Skype for Business](../../plan-your-deployment/network-requirements/load-balancing.md).</span></span>
    
    > [!IMPORTANT]
    > <span data-ttu-id="edcfc-217">基 URL 指的是 URL 的 Web 服务标识减去 https://。</span><span class="sxs-lookup"><span data-stu-id="edcfc-217">The base URL is the Web Services identity for the URL, minus the https://.</span></span> <span data-ttu-id="edcfc-218">例如，如果池的 Web 服务的完整 URL 为 https://webint.contoso.local ，则基 URL 为 webint.contoso.local。</span><span class="sxs-lookup"><span data-stu-id="edcfc-218">For example, if the full URL for the Web Services of the pool is https://webint.contoso.local, the base URL is webint.contoso.local.</span></span> 
  
    - <span data-ttu-id="edcfc-219">如果要配置 DNS 负载平衡，请选中"覆盖内部 Web 服务池 **FQDN"** 复选框，然后输入内部基 URL (该 URL 必须与内部基 URL 中的池 FQDN) **不同**。</span><span class="sxs-lookup"><span data-stu-id="edcfc-219">If you are configuring DNS load balancing, as we are in this example, select the **Override internal Web Services pool FQDN** check box, and enter the internal base URL (which must be different from the pool FQDN) in **Internal Base URL**.</span></span> 
    
    > [!CAUTION]
    > <span data-ttu-id="edcfc-220">如果您决定使用自定义的 FQDN 覆盖内部 Web 服务，则每个 FQDN 都必须与任何其他前端池、控制器或控制器池是唯一的。</span><span class="sxs-lookup"><span data-stu-id="edcfc-220">If you decide to override the Internal Web Services with a self-defined FQDN, each FQDN must be unique from any other Front End pool, Director, or Director pool.</span></span> <span data-ttu-id="edcfc-221">**定义 URL 或** (时，请仅使用标准字符) 包括 A-Z、a-z、0-9 和连字符。</span><span class="sxs-lookup"><span data-stu-id="edcfc-221">**Use only standard characters** (including A-Z, a-z, 0-9, and hyphens) when you define URLs or fully qualified domain names.</span></span> <span data-ttu-id="edcfc-222">不要使用 Unicode 字符或下划线。</span><span class="sxs-lookup"><span data-stu-id="edcfc-222">Do not use Unicode characters or underscores.</span></span> <span data-ttu-id="edcfc-223">外部 DNS 和公共证书颁发机构 (CA)  (通常不支持 URL 或 FQDN 中的非标准字符，即当必须将 URL 或 FQDN 分配给证书) 中的主题名称或主题备用名称时。</span><span class="sxs-lookup"><span data-stu-id="edcfc-223">Nonstandard characters in a URL or FQDN are often not supported by external DNS and public certification authorities (CAs) (that is, when the URL or FQDN must be assigned to the subject name or subject alternative name in the certificate).</span></span>
  
    - <span data-ttu-id="edcfc-224">（可选）在"外部基 URL"中输入 **外部基 URL。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-224">Optionally, enter the external base URL in **External Base URL**.</span></span> <span data-ttu-id="edcfc-225">您将输入外部基 URL 以将其与内部域名区分。</span><span class="sxs-lookup"><span data-stu-id="edcfc-225">You would enter the external base URL to differentiate it from your internal domain name.</span></span> <span data-ttu-id="edcfc-226">例如，内部域为 contoso.local，但外部域名 contoso.com。</span><span class="sxs-lookup"><span data-stu-id="edcfc-226">For example, your internal domain is contoso.local, but your external domain name is contoso.com.</span></span> <span data-ttu-id="edcfc-227">您将使用域名 contoso.com URL，因为它必须从公共 DNS 解析。</span><span class="sxs-lookup"><span data-stu-id="edcfc-227">You would define the URL using the contoso.com domain name since it must be resolvable from public DNS.</span></span> <span data-ttu-id="edcfc-228">如果是反向代理，这也很重要。</span><span class="sxs-lookup"><span data-stu-id="edcfc-228">This is also important in the case of a reverse proxy.</span></span> <span data-ttu-id="edcfc-229">外部基 URL 域名应该与反向代理的 FQDN 域名相同。</span><span class="sxs-lookup"><span data-stu-id="edcfc-229">The external base URL domain name would be the same as the domain name of the FQDN of the reverse proxy.</span></span> <span data-ttu-id="edcfc-230">移动客户端上的即时消息和状态需要访问前端池的 HTTP。</span><span class="sxs-lookup"><span data-stu-id="edcfc-230">HTTP access to the Front End pool is required for instant messaging and presence on mobile clients.</span></span>
    
      ![替代 Web 服务。](../../media/8f95313c-2df4-4885-adc5-9fc9ea775406.png)
  
11. <span data-ttu-id="edcfc-232">如果在"**选择功能"** 页上选择了"会议"，将要求您选择 Office Web Apps 服务器。</span><span class="sxs-lookup"><span data-stu-id="edcfc-232">If you selected **Conferencing** on the **Select Features** page, you will be asked to select an Office Web Apps server.</span></span> <span data-ttu-id="edcfc-233">单击 **"新建** "以启动对话框。</span><span class="sxs-lookup"><span data-stu-id="edcfc-233">Click **New** to launch the dialog box.</span></span>
    
12. <span data-ttu-id="edcfc-234">在" **定义新的 Office Web Apps 服务器** "对话框中，在 **"Office Web Apps 服务器 FQDN"框中键入 Office Web Apps 服务器的 FQDN;** 当您这样做时，您的 Office Web Apps 服务器发现 URL 应自动输入到 **"Office Web Apps 服务器发现 URL"** 框中。</span><span class="sxs-lookup"><span data-stu-id="edcfc-234">In the **Define New Office Web Apps Server** dialog box, type the FQDN of your Office Web Apps server in the **Office Web Apps Server FQDN** box; when you do this, your Office Web Apps server discovery URL should automatically be entered into the **Office Web Apps Server discovery URL** box.</span></span>
    
    <span data-ttu-id="edcfc-235">如果 Office Web Apps 服务器安装在本地，并且与 Skype for Business Server 位于同一网络区域中，请不要选择选项"Office Web Apps Server 部署在外部网络 (即外围 **/Internet) "** 中。</span><span class="sxs-lookup"><span data-stu-id="edcfc-235">If the Office Web Apps server is installed on-premises and in the same network zone as Skype for Business Server, do not select the option **Office Web Apps Server is deployed in an external network (that is, perimeter/Internet)**.</span></span>
    
    <span data-ttu-id="edcfc-236">如果 Office Web Apps 服务器部署在内部防火墙之外，请选择选项"Office Web Apps 服务器部署在外部网络 **(，即外围/Internet) 。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-236">If the Office Web Apps server is deployed outside your internal firewall, select the option **Office Web Apps Server is deployed in an external network (that is, perimeter/Internet)**.</span></span>
    
13. <span data-ttu-id="edcfc-237">单击 **"完成** "完成配置。</span><span class="sxs-lookup"><span data-stu-id="edcfc-237">Click **Finish** to complete the configuration.</span></span> <span data-ttu-id="edcfc-238">如果在"将服务器角色与此前端池关联"页上定义了其他角色服务器，将打开单独的角色配置向导页，您可以在其中配置服务器角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-238">If you defined other role servers on the **Associate server roles with this Front End pool** page, separate role configuration wizard pages will open where you can configure the server roles.</span></span> <span data-ttu-id="edcfc-239">本示例中，我们仅选择会议。</span><span class="sxs-lookup"><span data-stu-id="edcfc-239">In this example we only chose conferencing.</span></span>
    
### <a name="configure-simple-urls"></a><span data-ttu-id="edcfc-240">配置简单 URL</span><span class="sxs-lookup"><span data-stu-id="edcfc-240">Configure simple URLs</span></span>

1. <span data-ttu-id="edcfc-241">在拓扑生成器中，右键单击 **Skype for Business Server** 顶部节点，然后单击"编辑 **属性**"，如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-241">In Topology Builder, right-click the **Skype for Business Server** top node, and then click **Edit Properties**, as shown in the figure.</span></span>
    
     ![右键单击 Skype for Business Server，然后选择编辑属性。](../../media/692c18dd-8e99-4239-ae7b-5e855d866afa.png)
  
2. <span data-ttu-id="edcfc-243">在"**简单 URL"** 窗格中，选择"电话访问 **URL：** (电话拨入式) "或"会议 **URL：** (会议) "进行编辑，然后单击"编辑 **URL"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-243">In the **Simple URLs** pane, select either **Phone access URLs:** (Dial-in) or **Meeting URLs:** (Meet) to edit, and then click **Edit URL**.</span></span>
    
3. <span data-ttu-id="edcfc-244">将 URL 更新为所需的值，然后单击“确定”保存已编辑的 URL。</span><span class="sxs-lookup"><span data-stu-id="edcfc-244">Update the URL to the value you want, and then click **OK** to save the edited URL.</span></span> <span data-ttu-id="edcfc-245">您应该使用外部 SIP 域配置简单 URL，以便外部用户可以加入会议，例如，contoso.com，它是外部的，而不是 contoso.local，它是内部域。</span><span class="sxs-lookup"><span data-stu-id="edcfc-245">You should configure the simple URL using the external SIP domain so that external users can join meetings, for example, contoso.com, which is external, as opposed to contoso.local, which is an internal domain.</span></span> <span data-ttu-id="edcfc-246">因此，SIP 域应能够通过外部 DNS 进行解析。</span><span class="sxs-lookup"><span data-stu-id="edcfc-246">Thus, the SIP domain should be able to be resolved by external DNS.</span></span>
    
4. <span data-ttu-id="edcfc-247">如有必要，使用相同的步骤编辑会议 URL。</span><span class="sxs-lookup"><span data-stu-id="edcfc-247">Edit the Meet URL by using the same steps, if necessary.</span></span>
    
### <a name="to-define-the-optional-admin-simple-url"></a><span data-ttu-id="edcfc-248">定义可选的管理简单 URL</span><span class="sxs-lookup"><span data-stu-id="edcfc-248">To define the optional Admin simple URL</span></span>

1. <span data-ttu-id="edcfc-249">在拓扑生成器中，右键单击 **"Skype for Business Server"** 节点，然后单击"编辑 **属性"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-249">In Topology Builder, right-click the **Skype for Business Server** node, and then click **Edit Properties**.</span></span>
    
2. <span data-ttu-id="edcfc-250">在"**管理访问 URL"** 框中，输入要用于对 Skype for Business Server 控制面板的管理访问的简单 URL，然后单击"确定 **"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-250">In the **Administrative access URL** box, enter the simple URL you want for administrative access to Skype for Business Server Control Panel, and then click **OK**.</span></span>
    
    > [!TIP]
    > <span data-ttu-id="edcfc-251">建议尽可能使用最简单的 URL 作为管理 URL。</span><span class="sxs-lookup"><span data-stu-id="edcfc-251">We recommend using the simplest possible URL for the Admin URL.</span></span> <span data-ttu-id="edcfc-252">最简单的选项是 https://admin 。 _\<domain\>_</span><span class="sxs-lookup"><span data-stu-id="edcfc-252">The simplest option is https://admin. _\<domain\>_.</span></span> <span data-ttu-id="edcfc-253">管理 URL 可以是内部或外部域，例如 contoso.local 或 contoso.com，只要任一记录可在内部 DNS 中解析即可。</span><span class="sxs-lookup"><span data-stu-id="edcfc-253">The Admin URL can be either an internal or external domain, for example, contoso.local or contoso.com, as long as either record is resolvable in internal DNS.</span></span> 
  
    > [!IMPORTANT]
    > <span data-ttu-id="edcfc-254">如果在初始部署后更改简单 URL，您必须注意哪些更改会影响简单 URL 的域名系统 (DNS) 记录和证书。</span><span class="sxs-lookup"><span data-stu-id="edcfc-254">If you change a simple URL after initial deployment, you must be aware of what changes impact your Domain Name System (DNS) records and certificates for simple URLs.</span></span> <span data-ttu-id="edcfc-255">如果更改影响简单 URL 的基础，则还必须更改 DNS 记录和证书。</span><span class="sxs-lookup"><span data-stu-id="edcfc-255">If the change impacts the base of a simple URL, you must change the DNS records and certificates, too.</span></span> <span data-ttu-id="edcfc-256">例如，从 更改为 将基 URL 从 sfb.contoso.com 更改为 meet.contoso.com，因此您需要更改 DNS 记录和证书以引用 https://sfb.contoso.com/Meet https://meet.contoso.com meet.contoso.com。</span><span class="sxs-lookup"><span data-stu-id="edcfc-256">For example, changing from https://sfb.contoso.com/Meet to https://meet.contoso.com changes the base URL from sfb.contoso.com to meet.contoso.com, so you would need to change the DNS records and certificates to refer to meet.contoso.com.</span></span> <span data-ttu-id="edcfc-257">如果将简单 URL 从 更改为 ，则 sfb.contoso.com URL 保持不变，因此不需要 https://sfb.contoso.com/Meet https://sfb.contoso.com/Meetings 更改 DNS 或证书。</span><span class="sxs-lookup"><span data-stu-id="edcfc-257">If you changed the simple URL from https://sfb.contoso.com/Meet to https://sfb.contoso.com/Meetings, the base URL of sfb.contoso.com stays the same, so no DNS or certificate changes are needed.</span></span> <span data-ttu-id="edcfc-258">但是，只要更改简单 URL 名称，就必须在每个控制器和前端服务器上运行 **Enable-CsComputer** cmdlet 以注册更改。</span><span class="sxs-lookup"><span data-stu-id="edcfc-258">Whenever you change a simple URL name, however, you must run the **Enable-CsComputer** cmdlet on each Director and Front End server to register the change.</span></span>
  
### <a name="publish-and-verify-the-topology"></a><span data-ttu-id="edcfc-259">发布和验证拓扑</span><span class="sxs-lookup"><span data-stu-id="edcfc-259">Publish and verify the topology</span></span>

1. <span data-ttu-id="edcfc-260">检查所有简单 URL 是否配置正确。</span><span class="sxs-lookup"><span data-stu-id="edcfc-260">Check that all simple URLs are configured correctly.</span></span>
    
2. <span data-ttu-id="edcfc-261">确认基于SQL Server的服务器是否联机，并可供安装了拓扑生成器的计算机使用，包括任何必要的防火墙规则。</span><span class="sxs-lookup"><span data-stu-id="edcfc-261">Confirm that the SQL Server-based server is online and available to the computer where Topology Builder is installed, including any necessary firewall rules.</span></span>
    
3. <span data-ttu-id="edcfc-262">确认文件共享可用，并且定义了适当的权限。</span><span class="sxs-lookup"><span data-stu-id="edcfc-262">Confirm that the file share is available and that the proper permissions are defined.</span></span>
    
4. <span data-ttu-id="edcfc-263">确认拓扑中定义了满足部署要求的正确服务器角色。</span><span class="sxs-lookup"><span data-stu-id="edcfc-263">Confirm that the correct server roles that meet the deployment requirements are defined in the topology.</span></span>
    
5. <span data-ttu-id="edcfc-264">验证服务器是否存在于 Active Directory 域服务 (AD DS) 。</span><span class="sxs-lookup"><span data-stu-id="edcfc-264">Verify that the servers exist in Active Directory Domain Services (AD DS).</span></span> <span data-ttu-id="edcfc-265">当您将服务器加入域时，会自动发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="edcfc-265">This happens automatically when you join the servers to the domain.</span></span>
    
    <span data-ttu-id="edcfc-266">如果已验证拓扑并且未出现验证错误，则发布拓扑的准备工作应该已经就绪。</span><span class="sxs-lookup"><span data-stu-id="edcfc-266">When you have verified the topology and there are no validation errors, you should be ready to publish the topology.</span></span> <span data-ttu-id="edcfc-267">如果存在验证错误，则必须更正错误，然后才能发布拓扑。</span><span class="sxs-lookup"><span data-stu-id="edcfc-267">If there are validation errors, you must correct them before you can publish the topology.</span></span>
    
6. <span data-ttu-id="edcfc-268">右键单击 **"Skype for Business Server"** 节点，然后单击"**发布拓扑"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-268">Right-click the **Skype for Business Server** node, and then click **Publish Topology**.</span></span>
    
7. <span data-ttu-id="edcfc-269">在“发布拓扑”页上，单击“下一步”。</span><span class="sxs-lookup"><span data-stu-id="edcfc-269">On the **Publish the topology** page, click **Next**.</span></span>
    
8. <span data-ttu-id="edcfc-270">在" **选择中央管理服务器** "页上，选择一个前端池，如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-270">On the **Select Central Management Server** page, select a Front End pool, as shown in the figure.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="edcfc-271">可以单击 **"高级"** 配置数据库文件位置。</span><span class="sxs-lookup"><span data-stu-id="edcfc-271">You can click **Advanced** to configure database file locations.</span></span>
  
     ![选择中央管理存储服务器。](../../media/764478b5-8480-42c5-854f-649bb121cd94.png)
  
9. <span data-ttu-id="edcfc-273">在 **"选择数据库** "页上，选择要发布的数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-273">On the **Select databases** page, select the databases you want to publish.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="edcfc-274">如果您没有创建数据库的适当权限，您可以清除这些数据库旁边的复选框，并且具有相应权限的用户可以稍后创建数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-274">If you don't have the appropriate rights to create the databases, you can clear the check boxes next to those databases, and someone with appropriate rights can later create the databases.</span></span> <span data-ttu-id="edcfc-275">有关要求的详细信息，请参阅 [Server requirements for Skype for Business Server](../../plan-your-deployment/requirements-for-your-environment/server-requirements.md)。</span><span class="sxs-lookup"><span data-stu-id="edcfc-275">For details about requirements, see [Server requirements for Skype for Business Server](../../plan-your-deployment/requirements-for-your-environment/server-requirements.md).</span></span> 
  
10. <span data-ttu-id="edcfc-276">也可以单击“高级”。</span><span class="sxs-lookup"><span data-stu-id="edcfc-276">Optionally click **Advanced**.</span></span> <span data-ttu-id="edcfc-277">通过使用高级SQL Server数据文件放置选项，您可以在以下选项中进行选择：</span><span class="sxs-lookup"><span data-stu-id="edcfc-277">By using Advanced SQL Server data file placement options, you can select between the following options:</span></span> 
    
    - <span data-ttu-id="edcfc-278">**自动确定数据库文件位置** - 此选项根据基于 SQL Server 的服务器的磁盘配置，将日志和数据文件分发到最佳位置来确定最佳运行性能。</span><span class="sxs-lookup"><span data-stu-id="edcfc-278">**Automatically determine database file location** - This option determines the best operational performance based on the disk configuration on your SQL Server-based server by distributing the log and data files to the best location.</span></span>
    
    - <span data-ttu-id="edcfc-279">**使用SQL Server默认设置** - 此选项使用实例设置将日志和数据文件SQL Server基于服务器的服务器上。</span><span class="sxs-lookup"><span data-stu-id="edcfc-279">**Use SQL Server instance defaults** - This option puts log and data files onto the SQL Server-based server by using the instance settings.</span></span> <span data-ttu-id="edcfc-280">此选项不会使用基于 SQL Server 的服务器的运行功能来确定日志和数据的最佳位置。</span><span class="sxs-lookup"><span data-stu-id="edcfc-280">This option does not use the operational functionality of the SQL Server-based server to determine optimal locations for logs and data.</span></span> <span data-ttu-id="edcfc-281">通常，SQL Server 管理员会将日志和数据文件移动到适用于基于 SQL Server 的服务器和组织管理过程的位置。</span><span class="sxs-lookup"><span data-stu-id="edcfc-281">The SQL Server administrator would typically move the log and data files to locations that are appropriate for the SQL Server-based server and organization management procedures.</span></span>
    
    <span data-ttu-id="edcfc-282">单击“确定”，然后单击“下一步”。</span><span class="sxs-lookup"><span data-stu-id="edcfc-282">Click **OK**, and then click **Next**.</span></span> 
    
11. <span data-ttu-id="edcfc-283">（可选）单击"**高级"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-283">Optionally, click **Advanced**.</span></span> <span data-ttu-id="edcfc-284">通过使用高级SQL Server数据文件放置选项，您可以在以下选项中进行选择：</span><span class="sxs-lookup"><span data-stu-id="edcfc-284">By using Advanced SQL Server data file placement options, you can select between the following options:</span></span> 
    
    - <span data-ttu-id="edcfc-285">**自动确定数据库文件位置** - 此选项根据基于 SQL Server 的服务器的磁盘配置，将日志和数据文件分发到最佳位置来确定最佳运行性能。</span><span class="sxs-lookup"><span data-stu-id="edcfc-285">**Automatically determine database file location** - This option determines the best operational performance based on the disk configuration on your SQL Server-based server by distributing the log and data files to the best location.</span></span>
    
    - <span data-ttu-id="edcfc-286">**使用SQL Server默认设置** - 此选项使用实例设置将日志和数据文件SQL Server基于服务器的服务器上。</span><span class="sxs-lookup"><span data-stu-id="edcfc-286">**Use SQL Server instance defaults** - This option puts log and data files onto the SQL Server-based server by using the instance settings.</span></span> <span data-ttu-id="edcfc-287">此选项不会使用基于 SQL Server 的服务器的运行功能来确定日志和数据的最佳位置。</span><span class="sxs-lookup"><span data-stu-id="edcfc-287">This option does not use the operational functionality of the SQL Server-based server to determine optimal locations for logs and data.</span></span> <span data-ttu-id="edcfc-288">通常，SQL Server 管理员会将日志和数据文件移动到适用于基于 SQL Server 的服务器和组织管理过程的位置。</span><span class="sxs-lookup"><span data-stu-id="edcfc-288">The SQL Server administrator would typically move the log and data files to locations that are appropriate for the SQL Server-based server and organization management procedures.</span></span>
    
    <span data-ttu-id="edcfc-289">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="edcfc-289">Click **OK**.</span></span>
    
12. <span data-ttu-id="edcfc-290">单击“下一步”完成发布过程。</span><span class="sxs-lookup"><span data-stu-id="edcfc-290">Click **Next** to complete the publishing process.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="edcfc-291">此步骤的一个常见故障是SQL Server数据库。</span><span class="sxs-lookup"><span data-stu-id="edcfc-291">A common failure for this step is that the SQL Server databases cannot be created.</span></span> <span data-ttu-id="edcfc-292">当该过程无法完成时，会提供一个错误，如图所示。</span><span class="sxs-lookup"><span data-stu-id="edcfc-292">When the process cannot complete, an error is provided, as shown in the figure.</span></span> <span data-ttu-id="edcfc-293">最可能的原因是尝试创建数据库的用户没有适当的权限，或者由于防火墙或其他网络问题，无法联系 SQL Server 系统。</span><span class="sxs-lookup"><span data-stu-id="edcfc-293">The most likely cause is that the user attempting to create the database does not have the appropriate permissions, or the SQL Server system cannot be contacted due to a firewall or other network issue.</span></span> 
  
     ![创建中央管理存储时出错。](../../media/558bd2e4-2721-422d-9986-df86f642e6a1.png)
  
13. <span data-ttu-id="edcfc-295">发布过程完成后，将显示一个链接，以打开下一步的列表。</span><span class="sxs-lookup"><span data-stu-id="edcfc-295">When the publishing process completes, you are presented with a link to open a list of next steps.</span></span> <span data-ttu-id="edcfc-296">单击 **"单击此处打开要执行的列表**"以查看接下来的步骤，然后单击"完成 **"。**</span><span class="sxs-lookup"><span data-stu-id="edcfc-296">Click **Click here to open to-do list** to view the next steps, and then click **Finish**.</span></span> 
    
    <span data-ttu-id="edcfc-297">数据库创建时显示"已完成，带警告"消息并不意味着出现错误。</span><span class="sxs-lookup"><span data-stu-id="edcfc-297">The "Completed with warnings" message for the database creation does not mean there was an error.</span></span> <span data-ttu-id="edcfc-298">安装过程必须更改 SQL Server 中的设置，Skype for Business Server 正常运行。</span><span class="sxs-lookup"><span data-stu-id="edcfc-298">The installation process has to change settings in SQL Server for Skype for Business Server to work correctly.</span></span> <span data-ttu-id="edcfc-299">当安装程序中的设置SQL Server时，它将记录为警告，以便SQL Server管理员能够准确了解安装过程完成了哪些操作。</span><span class="sxs-lookup"><span data-stu-id="edcfc-299">When a setting is changed in SQL Server, it is logged as a warning so that SQL Server administrators can understand exactly what the installation process completed.</span></span> <span data-ttu-id="edcfc-300">如果收到警告，您可以选择该记录，然后单击"查看日志"以查看警告的详细信息。</span><span class="sxs-lookup"><span data-stu-id="edcfc-300">If you receive a warning, you can select the record, and then click **View Logs** to view the details of the warning.</span></span>
    
    <span data-ttu-id="edcfc-301">成功发布拓扑后，可以在拓扑中运行 Skype for Business Server 的每台服务器上开始安装中央管理存储的本地副本。</span><span class="sxs-lookup"><span data-stu-id="edcfc-301">When the topology has been successfully published, you can begin installing a local replica of the Central Management store on each server running Skype for Business Server in your topology.</span></span> <span data-ttu-id="edcfc-302">建议您从第一个前端池开始。</span><span class="sxs-lookup"><span data-stu-id="edcfc-302">We recommend that you begin with the first Front End pool.</span></span> 
