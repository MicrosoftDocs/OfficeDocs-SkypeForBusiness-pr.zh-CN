---
title: Skype 业务服务器中的定义转换规则
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
description: 业务 Server 企业语音的 Skype 将基于电话号码规范化为 E.164 格式的呼叫路由。 这意味着，将所拨打的所有字符串必须都规范化为 E.164 格式，以便执行反向号码查找 （rnl） 会，以便他们可以转换为其匹配的 SIP URI。 Skype 业务服务器提供操作呼叫的 ID 和呼叫者 ID 演示文稿的功能。
ms.openlocfilehash: 1615983b4ebeecc7374f8ef5c5c84ced83d0c151
ms.sourcegitcommit: bb53f131fabb03a66f0d000f8ba668fbad190778
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/11/2019
ms.locfileid: "33896321"
---
# <a name="defining-translation-rules-in-skype-for-business-server"></a><span data-ttu-id="467b5-105">Skype 业务服务器中的定义转换规则</span><span class="sxs-lookup"><span data-stu-id="467b5-105">Defining translation rules in Skype for Business Server</span></span>

<span data-ttu-id="467b5-106">业务 Server 企业语音的 Skype 将基于电话号码规范化为 E.164 格式的呼叫路由。</span><span class="sxs-lookup"><span data-stu-id="467b5-106">Skype for Business Server Enterprise Voice routes calls based on phone numbers normalized to E.164 format.</span></span> <span data-ttu-id="467b5-107">这意味着，将所拨打的所有字符串必须都规范化为 E.164 格式，以便执行反向号码查找 （rnl） 会，以便他们可以转换为其匹配的 SIP URI。</span><span class="sxs-lookup"><span data-stu-id="467b5-107">This means that all dialed strings must be normalized to E.164 format for the purpose of performing reverse number lookup (RNL) so they can be translated to their matching SIP URI.</span></span> <span data-ttu-id="467b5-108">Skype 业务服务器提供操作呼叫的 ID 和呼叫者 ID 演示文稿的功能。</span><span class="sxs-lookup"><span data-stu-id="467b5-108">Skype for Business Server provides the ability to manipulate the called ID and the caller ID presentation.</span></span>

<span data-ttu-id="467b5-109">与 Skype 的企业服务器，调用的方的电话号码 （即，调用的电话号码） 可以由 E.164 格式转换为本地拨号格式所需的中继对等方 （即，关联的网关、 专用交换机 (PBX) 或 SIP中继）。</span><span class="sxs-lookup"><span data-stu-id="467b5-109">With Skype for Business Server, the called party’s phone number (that is, the phone number called) can be translated from E.164 format to the local dialing format that is required by the trunk peer (that is, the associated gateway, private branch exchange (PBX), or SIP trunk).</span></span> <span data-ttu-id="467b5-110">为此，必须定义一个或多个转换规则，以便在将请求 URI 路由至中继对等方之前对其执行转换。</span><span class="sxs-lookup"><span data-stu-id="467b5-110">To do this, you must define one or more translation rules to translate the Request URI before routing it to the trunk peer.</span></span>

## <a name="caller-id-presentation"></a><span data-ttu-id="467b5-111">呼叫者 ID 演示文稿</span><span class="sxs-lookup"><span data-stu-id="467b5-111">Caller ID presentation</span></span>

<span data-ttu-id="467b5-112">Skype 业务服务器为本地拨号格式所需的中继对等方从 E.164 格式提供还平移呼叫方的电话号码 （即，呼叫者呼叫的电话号码） 的选项。</span><span class="sxs-lookup"><span data-stu-id="467b5-112">Skype for Business Server offers the option to also translate the calling party’s phone number (that is, the phone number that the caller is calling from) from E.164 format to the local dialing format that is required by the trunk peer.</span></span> <span data-ttu-id="467b5-113">例如，可以编写用于删除拨号串开头的 +44 并将其替换为 0144 的转换规则。</span><span class="sxs-lookup"><span data-stu-id="467b5-113">For example, you can write a translation rule to remove +44 from the beginning of a dial string and replace it with 0144.</span></span>

<span data-ttu-id="467b5-114">**使用适用于业务 Server Control Panel Skype 配置呼叫者 ID**</span><span class="sxs-lookup"><span data-stu-id="467b5-114">**To configure Caller ID by using the Skype for Business Server Control Panel**</span></span>

1. <span data-ttu-id="467b5-115">以 RTCUniversalServerAdmins 组成员的身份或者以 CsVoiceAdministrator、CsServerAdministrator 或 CsAdministrator 角色成员的身份登录计算机。</span><span class="sxs-lookup"><span data-stu-id="467b5-115">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="467b5-116">有关详细信息，请参阅[委派安装权限](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)。</span><span class="sxs-lookup"><span data-stu-id="467b5-116">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="467b5-117">打开一个浏览器窗口，然后输入管理 URL 以打开控制面板。</span><span class="sxs-lookup"><span data-stu-id="467b5-117">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="467b5-118">有关可用于业务控制面板的启动 Skype 的不同方法的详细信息，请参阅[安装和打开管理工具](../../management-tools/install-and-open-administrative-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="467b5-118">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="467b5-119">在左侧导航栏中，单击“语音路由”\*\*\*\*，然后单击“Trunk 配置”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-119">In the left navigation bar, click **Voice Routing**, and then click **Trunk Configuration**.</span></span>
4. <span data-ttu-id="467b5-120">在 Trunk 配置页上，双击某个现有的中继 （例如，**全局**中继） 以显示**编辑 Trunk 配置**对话框。</span><span class="sxs-lookup"><span data-stu-id="467b5-120">On the Trunk Configuration page, double-click an existing trunk (for example, the **Global** trunk) to display the **Edit Trunk Configuration** dialog box.</span></span>
5. <span data-ttu-id="467b5-121">配置呼叫者 ID 显示：</span><span class="sxs-lookup"><span data-stu-id="467b5-121">To configure caller ID presentation:</span></span>
    - <span data-ttu-id="467b5-122">若要从企业语音部署中可用的所有转换规则的列表中选择一个或多个规则，请单击**选择**。</span><span class="sxs-lookup"><span data-stu-id="467b5-122">To choose one or more rules from a list of all translation rules available in your Enterprise Voice deployment, click **Select**.</span></span> <span data-ttu-id="467b5-123">在“主叫号码转换规则”\*\*\*\* 中，单击要与中继关联的规则，然后单击“确定”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-123">In **Calling number translation rules**, click the rules that you want to associate with the trunk, and then click **OK**.</span></span>
    - <span data-ttu-id="467b5-124">要定义新的转换规则并将其与中继相关联，请单击“新建”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-124">To define a new translation rule and associate it with the trunk, click **New**.</span></span> 
    - <span data-ttu-id="467b5-125">要编辑已与中继关联的转换规则，请单击相应的规则名称，然后单击“显示详细信息”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-125">To edit a translation rule that is already associated with the trunk, click the rule name, and then click **Show details**.</span></span>
    - <span data-ttu-id="467b5-126">若要复制现有的转换规则要作为起点，用于定义一个新规则，单击规则名称，单击**复制**，然后单击**粘贴**。</span><span class="sxs-lookup"><span data-stu-id="467b5-126">To copy an existing translation rule to use as a starting point for defining a new rule, click the rule name, click **Copy**, and then click **Paste**.</span></span>
    - <span data-ttu-id="467b5-127">要从中继删除某个转换规则，请突出显示相应的规则名称，然后单击“删除”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-127">To remove a translation rule from the trunk, highlight the rule name and click **Remove**.</span></span>

> [!Warning] 
> <span data-ttu-id="467b5-128">如果已在关联的中继对等方上配置了转换规则，则不要将任何转换规则与中继相关联，因为这两种规则可能会发生冲突。</span><span class="sxs-lookup"><span data-stu-id="467b5-128">Do not associate translation rules with a trunk if you have configured translation rules on the associated trunk peer, because the two rules might conflict.</span></span> 

## <a name="called-id-presentation"></a><span data-ttu-id="467b5-129">呼叫的 ID 演示文稿</span><span class="sxs-lookup"><span data-stu-id="467b5-129">Called ID presentation</span></span>

> [!Important]
> <span data-ttu-id="467b5-130">将一个或多个转换规则与企业语音中继配置相关联的功能旨在用作*替代*中继对等方上配置转换规则。</span><span class="sxs-lookup"><span data-stu-id="467b5-130">The ability to associate one or more translation rules with an Enterprise Voice trunk configuration is intended to be used as an *alternative* to configuring translation rules on the trunk peer.</span></span> <span data-ttu-id="467b5-131">不关联转换规则与企业语音中继配置如果已在中继对等方上配置转换规则，因为这两种规则可能会发生冲突。</span><span class="sxs-lookup"><span data-stu-id="467b5-131">Do not associate translation rules with an Enterprise Voice trunk configuration if you have configured translation rules on the trunk peer because the two rules might conflict.</span></span> 

<span data-ttu-id="467b5-132">您可以使用下列方法之一可创建或修改转换规则：</span><span class="sxs-lookup"><span data-stu-id="467b5-132">You can use either of the following methods to create or modify a translation rule:</span></span>

- <span data-ttu-id="467b5-133">[使用生成的转换规则工具](#create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool)指定的起始数字、 长度、 要删除的数字和要添加，并让业务 Server 控制面板的 Skype 为您生成相应的匹配模式和转换规则的数字值。</span><span class="sxs-lookup"><span data-stu-id="467b5-133">[Use the Build a Translation Rule tool](#create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool) to specify values for the starting digits, length, digits to remove and digits to add, and then let the Skype for Business Server Control Panel generate the corresponding matching pattern and translation rule for you.</span></span>
- <span data-ttu-id="467b5-134">[手动编写正则表达式](#create-or-modify-a-translation-rule-manually)以定义匹配模式和转换规则。</span><span class="sxs-lookup"><span data-stu-id="467b5-134">[Write regular expressions manually](#create-or-modify-a-translation-rule-manually) to define the matching pattern and translation rule.</span></span>

> [!Note]
> <span data-ttu-id="467b5-135">有关如何编写正则表达式的信息，请参阅[.NET Framework 正则表达式](http://go.microsoft.com/fwlink/p/?linkId=140927)。</span><span class="sxs-lookup"><span data-stu-id="467b5-135">For information about how to write regular expressions, see [.NET Framework Regular Expressions](http://go.microsoft.com/fwlink/p/?linkId=140927).</span></span> 

### <a name="create-or-modify-a-translation-rule-by-using-the-build-a-translation-rule-tool"></a><span data-ttu-id="467b5-136">创建或修改转换规则使用建立转换规则工具</span><span class="sxs-lookup"><span data-stu-id="467b5-136">Create or modify a translation rule by using the Build a Translation Rule tool</span></span>

<span data-ttu-id="467b5-137">如果您想要在生成的转换规则工具中输入的一组值和启用业务 Server 控制面板为您生成的相应匹配模式和转换规则的 Skype 定义转换规则，请按照以下步骤。</span><span class="sxs-lookup"><span data-stu-id="467b5-137">Follow these steps if you want to define a translation rule by entering a set of values in the Build a Translation Rule tool and enabling the Skype for Business Server Control Panel to generate the corresponding matching pattern and translation rule for you.</span></span> 

<span data-ttu-id="467b5-138">**使用“构建转换规则”工具定义规则**</span><span class="sxs-lookup"><span data-stu-id="467b5-138">**To define a rule by using the Build a Translation Rule tool**</span></span>

1. <span data-ttu-id="467b5-139">以 RTCUniversalServerAdmins 组成员的身份或者以 CsVoiceAdministrator、CsServerAdministrator 或 CsAdministrator 角色成员的身份登录计算机。</span><span class="sxs-lookup"><span data-stu-id="467b5-139">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="467b5-140">有关详细信息，请参阅[委派安装权限](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)。</span><span class="sxs-lookup"><span data-stu-id="467b5-140">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="467b5-141">打开一个浏览器窗口，然后输入管理 URL 以打开控制面板。</span><span class="sxs-lookup"><span data-stu-id="467b5-141">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="467b5-142">有关可用于业务控制面板的启动 Skype 的不同方法的详细信息，请参阅[安装和打开管理工具](../../management-tools/install-and-open-administrative-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="467b5-142">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="467b5-143">要开始定义转换规则，请按照中的步骤[配置与媒体中继绕过](GET LINK AFTER MIGRATION)通过 10 个步骤或[配置无媒体中继绕过](GET LINK AFTER MIGRATION)前 9 个步骤。</span><span class="sxs-lookup"><span data-stu-id="467b5-143">To begin defining a translation rule, follow the steps in [Configure a trunk with media bypass](GET LINK AFTER MIGRATION)through step 10 or [Configure a trunk without media bypass](GET LINK AFTER MIGRATION) through step 9.</span></span>
4. <span data-ttu-id="467b5-144">在“新建转换规则”\*\*\*\* 或“编辑转换规则”\*\*\*\* 页上的“名称”\*\*\*\* 下，键入描述要转换的号码模式的名称。</span><span class="sxs-lookup"><span data-stu-id="467b5-144">Under **Name** on the **New Translation Rule** or **Edit Translation Rule** page, type a name that describes the number pattern being translated.</span></span>
5. <span data-ttu-id="467b5-145">（可选）在**说明**，键入转换规则-例如，**美国国际长途拨号**的说明。</span><span class="sxs-lookup"><span data-stu-id="467b5-145">(Optional) Under **Description**, type a description of the translation rule - for example, **US International long-distance dialing**.</span></span>
6. <span data-ttu-id="467b5-146">在对话框的“构建转换规则”\*\*\*\* 部分的以下字段中输入值：</span><span class="sxs-lookup"><span data-stu-id="467b5-146">In the **Build a Translation Rule** section of the dialog box, enter values in the following fields:</span></span>
    - <span data-ttu-id="467b5-147">**起始数字**：（可选）指定要使模式与之匹配的号码的前导数字。</span><span class="sxs-lookup"><span data-stu-id="467b5-147">**Starting digits**: (Optional) Specify the leading digits of numbers you want the pattern to match.</span></span> <span data-ttu-id="467b5-148">例如，在此字段输入 +，可与 E.164 格式（以 + 开头）的号码匹配。</span><span class="sxs-lookup"><span data-stu-id="467b5-148">For example, enter + in this field to match numbers in E.164 format (which begin with +).</span></span>
    - <span data-ttu-id="467b5-p112">**长度**：指定匹配模式中的数字位数，并选择希望模式匹配的号码是必须具有此准确长度、至少具有此长度还是可以具有任何长度。例如，输入 **11** 并在下拉列表中选择**At least**可匹配长度至少为 11 位的号码。</span><span class="sxs-lookup"><span data-stu-id="467b5-p112">**Length**: Specify the number of digits in the matching pattern and select whether you want the pattern to match numbers that are this length exactly, at least this length, or any length. For example, enter **11** and select **At least** in the drop-down list to match numbers that are at least 11 digits in length.</span></span>
    - <span data-ttu-id="467b5-151">**要删除的数字**：（可选）指定要删除的起始数字的位数。</span><span class="sxs-lookup"><span data-stu-id="467b5-151">**Digits to remove**: (Optional) Specify the number of starting digits to be removed.</span></span> <span data-ttu-id="467b5-152">例如，输入 **1** 将去掉号码开头的 +。</span><span class="sxs-lookup"><span data-stu-id="467b5-152">For example, enter **1** to strip out the + from the beginning of the number.</span></span>
    - <span data-ttu-id="467b5-p114">**要添加的数字**：（可选）指定要附加到转换号码前面的数字。例如，如果要在应用规则时将 011 附加到转换号码的前面，则输入 **011**。</span><span class="sxs-lookup"><span data-stu-id="467b5-p114">**Digits to add**: (Optional) Specify digits to be prepended to the translated numbers. For example, enter **011** if you want 011 to be prepended to the translated numbers when the rule is applied.</span></span>
    
    <span data-ttu-id="467b5-155">在这些字段中输入的值都反映在**要匹配模式**和**转换**规则字段中。</span><span class="sxs-lookup"><span data-stu-id="467b5-155">The values you enter in these fields are reflected in the **Pattern to match** and **Translation** rule fields.</span></span> <span data-ttu-id="467b5-156">例如，如果指定上述示例中的值时，生成的正则表达式**模式 matc**h 字段中是：</span><span class="sxs-lookup"><span data-stu-id="467b5-156">For example, if you specify the preceding example values, the resulting regular expression in the **Pattern to matc**h field is:</span></span>
    
    <span data-ttu-id="467b5-157">**^\+(\d{9}\d+)$**</span><span class="sxs-lookup"><span data-stu-id="467b5-157">**^\+(\d{9}\d+)$**</span></span> 

    <span data-ttu-id="467b5-p116">“转换规则”\*\*\*\* 字段指定转换号码格式的模式。该模式由两部分组成：</span><span class="sxs-lookup"><span data-stu-id="467b5-p116">The **Translation rule** field specifies a pattern for the format of translated numbers. This pattern has two parts:</span></span>
    - <span data-ttu-id="467b5-160">代表匹配模式中数字位数的值（例如，**$1**）</span><span class="sxs-lookup"><span data-stu-id="467b5-160">A value (for example, **$1**) that represents the number of digits in the matching pattern</span></span>
    - <span data-ttu-id="467b5-161">（可选）可以通过在“要添加的数字”\*\*\*\* 字段中输入来附加的值</span><span class="sxs-lookup"><span data-stu-id="467b5-161">(Optional) A value that you can prepend by entering it in the **Digits to add** field</span></span>

    <span data-ttu-id="467b5-162">如果使用前面示例中的值，“转换规则”\*\*\*\* 字段中将显示 **011$1**。</span><span class="sxs-lookup"><span data-stu-id="467b5-162">Using the preceding example values, **011$1** appears in the **Translation rule** field.</span></span>
    
    <span data-ttu-id="467b5-163">应用此转换规则后，+441235551010 将变为 011441235551010。</span><span class="sxs-lookup"><span data-stu-id="467b5-163">When this translation rule is applied, +441235551010 becomes 011441235551010.</span></span>
7. <span data-ttu-id="467b5-164">单击“确定”\*\*\*\* 保存转换规则。</span><span class="sxs-lookup"><span data-stu-id="467b5-164">Click **OK** to save the translation rule.</span></span>
8. <span data-ttu-id="467b5-165">单击“确定”\*\*\*\* 保存中继配置。</span><span class="sxs-lookup"><span data-stu-id="467b5-165">Click **OK** to save the trunk configuration.</span></span>
9. <span data-ttu-id="467b5-166">在**中继配置**n 页上，单击**提交**，，然后单击**全部提交**。</span><span class="sxs-lookup"><span data-stu-id="467b5-166">On the **Trunk Configuratio**n page, click **Commit**, and then click **Commit all**.</span></span> 

> [!Note]
> <span data-ttu-id="467b5-167">每当创建或修改转换规则时，都必须运行“全部提交”\*\*\*\* 命令以发布配置更改。</span><span class="sxs-lookup"><span data-stu-id="467b5-167">Whenever you create or modify a translation rule, you must run the **Commit all** command to publish the configuration change.</span></span> <span data-ttu-id="467b5-168">有关详细信息，请参阅[发布待处理的语音路由配置更改](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx)。</span><span class="sxs-lookup"><span data-stu-id="467b5-168">For details, see [Publish pending changes to the voice routing configuration](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx).</span></span> 

### <a name="create-or-modify-a-translation-rule-manually"></a><span data-ttu-id="467b5-169">手动创建或修改转换规则</span><span class="sxs-lookup"><span data-stu-id="467b5-169">Create or modify a translation rule manually</span></span>

<span data-ttu-id="467b5-170">如果您想要定义转换规则，通过编写正则表达式的匹配模式和转换规则，请按照以下步骤。</span><span class="sxs-lookup"><span data-stu-id="467b5-170">Follow these steps if you want to define a translation rule by writing a regular expression for the matching pattern and translation rule.</span></span> 

<span data-ttu-id="467b5-171">**手动定义转换规则**</span><span class="sxs-lookup"><span data-stu-id="467b5-171">**To define a translation rule manually**</span></span>

1. <span data-ttu-id="467b5-172">以 RTCUniversalServerAdmins 组成员的身份或者以 CsVoiceAdministrator、CsServerAdministrator 或 CsAdministrator 角色成员的身份登录计算机。</span><span class="sxs-lookup"><span data-stu-id="467b5-172">Log on to the computer as a member of the RTCUniversalServerAdmins group, or as a member of the CsVoiceAdministrator, CsServerAdministrator, or CsAdministrator role.</span></span> <span data-ttu-id="467b5-173">有关详细信息，请参阅[委派安装权限](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx)。</span><span class="sxs-lookup"><span data-stu-id="467b5-173">For details, see [Delegate setup permissions](https://technet.microsoft.com/en-us/library/gg412735(v=ocs.15).aspx).</span></span>
2. <span data-ttu-id="467b5-174">打开一个浏览器窗口，然后输入管理 URL 以打开控制面板。</span><span class="sxs-lookup"><span data-stu-id="467b5-174">Open a browser window, and then enter the Admin URL to open the Control Panel.</span></span> <span data-ttu-id="467b5-175">有关可用于业务控制面板的启动 Skype 的不同方法的详细信息，请参阅[安装和打开管理工具](../../management-tools/install-and-open-administrative-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="467b5-175">For details about the different methods you can use to start the Skype for Business Control Panel, see [Install and open administrative tools](../../management-tools/install-and-open-administrative-tools.md).</span></span>
3. <span data-ttu-id="467b5-176">要开始定义转换规则，请按照中的步骤[配置与媒体中继绕过](GET LINK AFTER MIGRATION)通过 10 个步骤或[配置无媒体中继绕过](GET LINK AFTER MIGRATION)前 9 个步骤。</span><span class="sxs-lookup"><span data-stu-id="467b5-176">To begin defining a translation rule, follow the steps in [Configure a trunk with media bypass](GET LINK AFTER MIGRATION)through step 10 or [Configure a trunk without media bypass](GET LINK AFTER MIGRATION) through step 9.</span></span>
4. <span data-ttu-id="467b5-177">在“新建转换规则”\*\*\*\* 或“编辑转换规则”\*\*\*\* 页上的“名称”\*\*\*\* 字段中，键入描述要转换的号码模式的名称。</span><span class="sxs-lookup"><span data-stu-id="467b5-177">In the **Name** field on the **New Translation Rule** or **Edit Translation Rule** page, type a name that describes the number pattern being translated.</span></span>
5. <span data-ttu-id="467b5-178">（可选）在**说明**框中，键入转换规则; 的说明例如，**美国国际长途拨号**。</span><span class="sxs-lookup"><span data-stu-id="467b5-178">(Optional) In **Description**, type a description of the translation rule; for example, **US International long-distance dialing**.</span></span>
6. <span data-ttu-id="467b5-179">单击“构建转换规则”\*\*\*\* 部分底部的“编辑”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-179">Click **Edit** at the bottom of the **Build a Translation Rule** section.</span></span>
7. <span data-ttu-id="467b5-180">在键入**正则表达式**输入以下内容：</span><span class="sxs-lookup"><span data-stu-id="467b5-180">Enter the following in Type a **Regular Expression**:</span></span>
    - <span data-ttu-id="467b5-181">在“匹配此模式”\*\*\*\* 中，指定将用于匹配要转换的号码的模式。</span><span class="sxs-lookup"><span data-stu-id="467b5-181">In **Match this pattern**, specify the pattern that will be used to match the numbers to be translated.</span></span>
    - <span data-ttu-id="467b5-182">在“转换规则”\*\*\*\* 中，指定转换号码格式的模式。</span><span class="sxs-lookup"><span data-stu-id="467b5-182">In **Translation rule**, specify a pattern for the format of translated numbers.</span></span>

    <span data-ttu-id="467b5-183">例如，如果输入**^ \+(\d{9}\d+)$** **匹配此模式**中和**011$ 1**中**转换规则**，该规则会将 + 441235551010 转换为 011441235551010。</span><span class="sxs-lookup"><span data-stu-id="467b5-183">For example, if you enter **^\+(\d{9}\d+)$** in **Match this pattern** and **011$1** in **Translation rule**, the rule will translate +441235551010 to 011441235551010.</span></span>
8. <span data-ttu-id="467b5-184">单击“确定”\*\*\*\* 保存转换规则。</span><span class="sxs-lookup"><span data-stu-id="467b5-184">Click **OK** to save the translation rule.</span></span>
9. <span data-ttu-id="467b5-185">单击“确定”\*\*\*\* 保存中继配置。</span><span class="sxs-lookup"><span data-stu-id="467b5-185">Click **OK** to save the trunk configuration.</span></span>
10. <span data-ttu-id="467b5-186">在“Trunk 配置”\*\*\*\* 页上，单击“提交”\*\*\*\*，然后单击“全部提交”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="467b5-186">On the **Trunk Configuration** page, click **Commit**, and then click **Commit all**.</span></span> 

> [!Note] 
> <span data-ttu-id="467b5-187">每当创建或修改转换规则时，都必须运行“全部提交”\*\*\*\* 命令以发布配置更改。</span><span class="sxs-lookup"><span data-stu-id="467b5-187">Whenever you create or modify a translation rule, you must run the **Commit all** command to publish the configuration change.</span></span> <span data-ttu-id="467b5-188">有关详细信息，请参阅[发布待处理的语音路由配置更改](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx)。</span><span class="sxs-lookup"><span data-stu-id="467b5-188">For details, see [Publish pending changes to the voice routing configuration](https://technet.microsoft.com/en-us/library/gg413088(v=ocs.15).aspx).</span></span> 
