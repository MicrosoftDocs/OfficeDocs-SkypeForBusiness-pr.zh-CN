---
title: 持久聊天服务器表的列表
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 10/20/2015
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.assetid: 26c9e271-3516-4d90-b930-70fec4e359ea
description: 持久聊天数据库架构由下表组成。
ms.openlocfilehash: 6a6c0bc2c2cc2d5e5ba59f9f636ed9cea2189bed
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/20/2019
ms.locfileid: "34295648"
---
# <a name="list-of-persistent-chat-server-tables"></a><span data-ttu-id="e7ed6-103">持久聊天服务器表的列表</span><span class="sxs-lookup"><span data-stu-id="e7ed6-103">List of Persistent Chat Server tables</span></span>
 
<span data-ttu-id="e7ed6-104">持久聊天数据库架构由下表组成。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-104">The Persistent Chat database schema consists of the following tables.</span></span>
  
## <a name="active-directory-sync"></a><span data-ttu-id="e7ed6-105">Active Directory 同步</span><span class="sxs-lookup"><span data-stu-id="e7ed6-105">Active Directory Sync</span></span>

|<span data-ttu-id="e7ed6-106">**表格**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-106">**Table**</span></span>|<span data-ttu-id="e7ed6-107">**说明**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-107">**Description**</span></span>|
|:-----|:-----|
|[<span data-ttu-id="e7ed6-108">tblADCookie</span><span class="sxs-lookup"><span data-stu-id="e7ed6-108">tblADCookie</span></span>](tbladcookie.md) <br/> |<span data-ttu-id="e7ed6-109">包含当前的轻型目录访问协议 (LDAP) 同步 cookie。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-109">Contains the current Lightweight Directory Access Protocol (LDAP) Sync cookies.</span></span> <span data-ttu-id="e7ed6-110">每行对应于持久聊天服务器主动监视更改的 Active Directory 域服务域。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-110">Each row corresponds to an Active Directory Domain Services domain that Persistent Chat Server is actively monitoring for changes.</span></span> <span data-ttu-id="e7ed6-111">(此表中仅表示与持久聊天服务器相关的 Active Directory 域。)</span><span class="sxs-lookup"><span data-stu-id="e7ed6-111">(Only the Active Directory domains that are relevant for Persistent Chat Server are represented in this table.)</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-112">tblPrincipalMemberDifference</span><span class="sxs-lookup"><span data-stu-id="e7ed6-112">tblPrincipalMemberDifference</span></span>](tblprincipalmemberdifference.md) <br/> |<span data-ttu-id="e7ed6-113">包含后续 Active Directory 同步步骤尚未处理的组成员身份更改 (已添加和已删除成员), 并且是 Active Directory 同步的第一步中使用的临时表 (连同 tblADUpdates 表) 之一。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-113">Contains group membership changes (both added and removed members) that have not yet been processed by the later Active Directory Sync steps and is one of the temporary tables (along with tblADUpdates table) that is used in the first step of Active Directory Sync.</span></span>  <br/> <span data-ttu-id="e7ed6-114">仅对 tblPrincipal 表中列出的组或已列出成员的组, 存储、处理或处理成员身份更改。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-114">Membership changes are stored, processed, or both, only for groups that are listed in the tblPrincipal table or that already have members listed there.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-115">tblADUpdates</span><span class="sxs-lookup"><span data-stu-id="e7ed6-115">tblADUpdates</span></span>](tbladupdates.md) <br/> |<span data-ttu-id="e7ed6-116">包含对 Active Directory 域服务所做的更改, 这些更改尚未由后续 Active Directory 同步步骤处理, 并且是 Active directory 的第一步中使用的临时表 (以及 tblPrincipalMemberDifference 表) 之一同步.</span><span class="sxs-lookup"><span data-stu-id="e7ed6-116">Contains changes to Active Directory Domain Services that have not yet been processed by the later Active Directory Sync steps and is one of the temporary tables (along with the tblPrincipalMemberDifference table) that is used in the first step of Active Directory Sync.</span></span>  <br/> <span data-ttu-id="e7ed6-117">仅对已在 tblPrincipal 表中列出的主体存储、处理或处理对 Active Directory 所做的更改。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-117">Changes to Active Directory are stored, processed, or both only for principals that are already listed in the tblPrincipal table.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-118">tblPrincipalMembers</span><span class="sxs-lookup"><span data-stu-id="e7ed6-118">tblPrincipalMembers</span></span>](tblprincipalmembers.md) <br/> |<span data-ttu-id="e7ed6-119">包含主体成员身份。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-119">Contains principal memberships.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-120">tblPrincipalMeta</span><span class="sxs-lookup"><span data-stu-id="e7ed6-120">tblPrincipalMeta</span></span>](tblprincipalmeta.md) <br/> |<span data-ttu-id="e7ed6-121">包含必须从 Active Directory 刷新的主体。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-121">Contains the principals that have to be refreshed from Active Directory.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-122">tblSkippedAffiliations</span><span class="sxs-lookup"><span data-stu-id="e7ed6-122">tblSkippedAffiliations</span></span>](tblskippedaffiliations.md) <br/> |<span data-ttu-id="e7ed6-123">包含由于某些原因而无法刷新的隶属关系, 通常是由于 Active Directory 访问错误所致。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-123">Contains affiliations that could not be refreshed for some reason, usually due to Active Directory access errors.</span></span>  <br/> <span data-ttu-id="e7ed6-124">此表仅供提供信息之用。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-124">This table is for informational purposes only.</span></span> <span data-ttu-id="e7ed6-125">不使用其内容。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-125">Its content is not used.</span></span>  <br/> <span data-ttu-id="e7ed6-126">具有无法正确刷新的隶属关系的主体将保留在 tblPrincipalMeta 表中, 并且会被授予另一次机会进行刷新。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-126">The principals with affiliations that could not be refreshed properly are kept in the tblPrincipalMeta table and are given another chance to be refreshed.</span></span>  <br/> |
   
## <a name="principals-affiliations-nodes-scopes-and-roles"></a><span data-ttu-id="e7ed6-127">主体、隶属关系、节点、范围和角色</span><span class="sxs-lookup"><span data-stu-id="e7ed6-127">Principals, Affiliations, Nodes, Scopes, and Roles</span></span>

|<span data-ttu-id="e7ed6-128">**表格**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-128">**Table**</span></span>|<span data-ttu-id="e7ed6-129">**说明**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-129">**Description**</span></span>|
|:-----|:-----|
|[<span data-ttu-id="e7ed6-130">tblPrincipalType</span><span class="sxs-lookup"><span data-stu-id="e7ed6-130">tblPrincipalType</span></span>](tblprincipaltype.md) <br/> |<span data-ttu-id="e7ed6-131">包含用于对 tblPrincipal 表中的内容进行分类的主体类型。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-131">Contains principal types to categorize what is in the tblPrincipal table.</span></span> <span data-ttu-id="e7ed6-132">此表是静态表。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-132">This table is static.</span></span> <span data-ttu-id="e7ed6-133">它是在创建数据库期间设置的, 不会更改。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-133">It is set up during database creation and does not change.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-134">tblPrincipal</span><span class="sxs-lookup"><span data-stu-id="e7ed6-134">tblPrincipal</span></span>](tblprincipal.md) <br/> |<span data-ttu-id="e7ed6-135">包含所有主体 (用户、文件夹、组等)。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-135">Contains all principals (users, folders, groups, and so on).</span></span> <span data-ttu-id="e7ed6-136">持久聊天服务器将其作为单层异类列表处理。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-136">Persistent Chat Server handles this as a flat heterogeneous list.</span></span> <span data-ttu-id="e7ed6-137">各种列基于每个主体的类型。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-137">Various columns are based on the type of each principal.</span></span>  <br/> <span data-ttu-id="e7ed6-138">大多数主体都是存储在 Active Directory 中的对象的缓存副本。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-138">Most of these principals are cached copies of objects stored in Active Directory.</span></span> <span data-ttu-id="e7ed6-139">在这些 Active Directory 对象的主体表中创建缓存的副本称为预配。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-139">Creating the cached copy in the Principal table of these Active Directory objects is referred as provisioning.</span></span>  <br/> <span data-ttu-id="e7ed6-140">某些主体的创建比其他主体更主动, 并且某些 Active Directory 对象完全被忽略。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-140">Some principals are created more aggressively than others, and some Active Directory objects are ignored altogether.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-141">tblPrincipalAffiliations</span><span class="sxs-lookup"><span data-stu-id="e7ed6-141">tblPrincipalAffiliations</span></span>](tblprincipalaffiliations.md) <br/> |<span data-ttu-id="e7ed6-142">包含描述 Active Directory 安全组、Active Directory 容器等中的成员身份的承担者隶属关系。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-142">Contains principal affiliations that describe memberships in Active Directory security groups, Active Directory containers, and so on.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-143">tblNode</span><span class="sxs-lookup"><span data-stu-id="e7ed6-143">tblNode</span></span>](tblnode.md) <br/> |<span data-ttu-id="e7ed6-144">包含 "控制面板" 中托管的 "类别" 节点。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-144">Contains the category node, as managed in the control panel.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-145">tblRoleType</span><span class="sxs-lookup"><span data-stu-id="e7ed6-145">tblRoleType</span></span>](tblroletype.md) <br/> |<span data-ttu-id="e7ed6-146">包含角色类型及其关联的权限集。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-146">Contains role types and their associated permission sets.</span></span> <span data-ttu-id="e7ed6-147">此查阅表格是静态的。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-147">This lookup table is static.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-148">tblScopePrincipal</span><span class="sxs-lookup"><span data-stu-id="e7ed6-148">tblScopePrincipal</span></span>](tblscopeprincipal.md) <br/> |<span data-ttu-id="e7ed6-149">包含分配给节点的作用域。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-149">Contains scopes assigned to nodes.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-150">tblPrincipalRole</span><span class="sxs-lookup"><span data-stu-id="e7ed6-150">tblPrincipalRole</span></span>](tblprincipalrole.md) <br/> |<span data-ttu-id="e7ed6-151">包含分配给节点的角色。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-151">Contains roles assigned to nodes.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-152">tblSiopWhiteList</span><span class="sxs-lookup"><span data-stu-id="e7ed6-152">tblSiopWhiteList</span></span>](tblsiopwhitelist.md) <br/> |<span data-ttu-id="e7ed6-153">包含可与节点相关联的注册外接程序。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-153">Contains the registered Add-ins that can be associated with nodes.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-154">tblEnumAttribute</span><span class="sxs-lookup"><span data-stu-id="e7ed6-154">tblEnumAttribute</span></span>](tblenumattribute.md) <br/> |<span data-ttu-id="e7ed6-155">仅包含 tblNode 表中使用的硬编码的 "Visibility" 和 "行为" 属性。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-155">Contains only the hardcoded "Visibility" and "Behavior" attributes that are used in the tblNode table.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-156">tblEnumValue</span><span class="sxs-lookup"><span data-stu-id="e7ed6-156">tblEnumValue</span></span>](tblenumvalue.md) <br/> |<span data-ttu-id="e7ed6-157">包含 tblNode 表中使用的硬编码的 "Visibility" 和 "行为" 属性的值。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-157">Contains the values of the hardcoded "Visibility" and "Behavior" attributes that are used in the tblNode table.</span></span>  <br/> |
   
## <a name="invites-chats-and-other-client-support"></a><span data-ttu-id="e7ed6-158">邀请、聊天和其他客户端支持</span><span class="sxs-lookup"><span data-stu-id="e7ed6-158">Invites, Chats, and Other Client Support</span></span>

|<span data-ttu-id="e7ed6-159">**表格**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-159">**Table**</span></span>|<span data-ttu-id="e7ed6-160">**说明**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-160">**Description**</span></span>|
|:-----|:-----|
|[<span data-ttu-id="e7ed6-161">tblPrincipalInvites</span><span class="sxs-lookup"><span data-stu-id="e7ed6-161">tblPrincipalInvites</span></span>](tblprincipalinvites.md) <br/> |<span data-ttu-id="e7ed6-162">包含系统中已启用自动邀请的所有节点的所有预配用户的邀请。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-162">Contains invites for all provisioned users in the system for all nodes with Auto Invite enabled.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-163">tblChat</span><span class="sxs-lookup"><span data-stu-id="e7ed6-163">tblChat</span></span>](tblchat.md) <br/> |<span data-ttu-id="e7ed6-164">包含所有聊天消息。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-164">Contains all chat messages.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-165">tblLastInviteId</span><span class="sxs-lookup"><span data-stu-id="e7ed6-165">tblLastInviteId</span></span>](tbllastinviteid.md) <br/> |<span data-ttu-id="e7ed6-166">包含为每位用户生成的最后一个邀请 ID (并在 tblPrincipalInvites 表中使用)。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-166">Contains the last invite ID that was generated (and used in the tblPrincipalInvites table) for each user.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-167">tblLastChatId</span><span class="sxs-lookup"><span data-stu-id="e7ed6-167">tblLastChatId</span></span>](tbllastchatid.md) <br/> |<span data-ttu-id="e7ed6-168">包含为每位用户生成的最后一个聊天 ID (和在 tblChat 表中使用)。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-168">Contains the last chat ID that was generated (and used in the tblChat table) for each user.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-169">tblPreference</span><span class="sxs-lookup"><span data-stu-id="e7ed6-169">tblPreference</span></span>](tblpreference.md) <br/> |<span data-ttu-id="e7ed6-170">包含用户客户端首选项 (仅供旧版客户端使用)。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-170">Contains user client preferences (used by legacy clients only).</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-171">tblFileToken</span><span class="sxs-lookup"><span data-stu-id="e7ed6-171">tblFileToken</span></span>](tblfiletoken.md) <br/> |<span data-ttu-id="e7ed6-172">包含用于文件传输目的的临时令牌。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-172">Contains temporary tokens for file transfer purposes.</span></span> <span data-ttu-id="e7ed6-173">每次上载或下载文件时, 持久聊天服务都会生成客户端用于访问 Web 服务文件存储的令牌。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-173">Each time a file is uploaded or downloaded, the Persistent Chat service generates a token that the client uses to access the Web service file store.</span></span>  <br/> |
   
## <a name="server-support"></a><span data-ttu-id="e7ed6-174">服务器支持</span><span class="sxs-lookup"><span data-stu-id="e7ed6-174">Server Support</span></span>

|<span data-ttu-id="e7ed6-175">**表格**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-175">**Table**</span></span>|<span data-ttu-id="e7ed6-176">**说明**</span><span class="sxs-lookup"><span data-stu-id="e7ed6-176">**Description**</span></span>|
|:-----|:-----|
|[<span data-ttu-id="e7ed6-177">tblServerIdentity</span><span class="sxs-lookup"><span data-stu-id="e7ed6-177">tblServerIdentity</span></span>](tblserveridentity.md) <br/> |<span data-ttu-id="e7ed6-178">包含持久聊天服务器池中的活动服务器。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-178">Contains the active servers in the Persistent Chat Server pool.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-179">tblAdminLock</span><span class="sxs-lookup"><span data-stu-id="e7ed6-179">tblAdminLock</span></span>](tbladminlock.md) <br/> |<span data-ttu-id="e7ed6-180">包含用于运行某些管理员命令的管理员锁。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-180">Contains the administrator lock to run some administrator commands.</span></span> <span data-ttu-id="e7ed6-181">TblSystemRevision 表中的系统修订条目在每个锁版本后递增。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-181">The system revision entry in the tblSystemRevision table is incremented after each release of the lock.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-182">tblSystemRevision</span><span class="sxs-lookup"><span data-stu-id="e7ed6-182">tblSystemRevision</span></span>](tblsystemrevision.md) <br/> |<span data-ttu-id="e7ed6-183">包含所使用的修订号条目 (与 tblAdminLock 表一起), 以便跨多台服务器实现一致性。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-183">Contains the revision number entry used (along with the tblAdminLock table) for achieving consistency across multiple servers.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-184">tblActivePeers</span><span class="sxs-lookup"><span data-stu-id="e7ed6-184">tblActivePeers</span></span>](tblactivepeers.md) <br/> |<span data-ttu-id="e7ed6-185">包含持久聊天服务之间的当前对等连接。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-185">Contains current peer-to-peer connections between Persistent Chat services.</span></span>  <br/> |
|[<span data-ttu-id="e7ed6-186">tblConfig</span><span class="sxs-lookup"><span data-stu-id="e7ed6-186">tblConfig</span></span>](tblconfig.md) <br/> |<span data-ttu-id="e7ed6-187">包含持久聊天服务器不支持的配置。</span><span class="sxs-lookup"><span data-stu-id="e7ed6-187">Contains the Persistent Chat Server unsupported configuration.</span></span>  <br/> |
   

