---
title: 规划Teams自动助理和呼叫队列
author: CarolynRowe
ms.author: crowe
manager: serdars
ms.reviewer: colongma
ms.topic: article
ms.assetid: ab9f05a2-22cb-4692-a585-27f82d1b37c7
ms.tgt.pltfrm: cloud
ms.service: msteams
search.appverid: MET150
ms.collection:
- M365-voice
- m365initiative-voice
audience: Admin
appliesto:
- Skype for Business
- Microsoft Teams
ms.localizationpriority: medium
f1.keywords:
- CSH
ms.custom:
- ms.teamsadmincenter.autoattendants.overview
- Phone System
- seo-marvel-apr2020
description: 了解自动助理和呼叫队列，以及如何使用它们帮助呼叫者通过菜单系统移动以联系组织中的人员或部门。
ms.openlocfilehash: 76755e722abdcde6673baac42681697165921aca
ms.sourcegitcommit: bd05783dfb33a63e0eb083a2135f97d110dc81a3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/26/2022
ms.locfileid: "65059273"
---
# <a name="plan-for-teams-auto-attendants-and-call-queues"></a>规划Teams自动助理和呼叫队列

自动助理允许你设置菜单选项，以基于调用方输入路由呼叫。 菜单选项，如“对于销售，按 1。  对于服务按 2“，对于自动助理，组织可以提供一系列选项，引导呼叫者快速访问其目标，而无需依靠人工操作员来处理传入呼叫。

呼叫队列正在等待呼叫方的区域。 对于呼叫者需要联系具有特定专业（如销售或服务）而不是特定人员的人员的情况，可以使用呼叫队列将呼叫者连接到可帮助他们的代理组。 调用方被搁置，直到分配给队列的代理可以接听其呼叫。

自动助理和呼叫队列一起使用，可以轻松地将呼叫者路由到组织中的相应人员或部门。

## <a name="auto-attendants"></a>自动助理

自动助理的主要目的是根据调用方对提供的菜单选项的输入，将呼叫者定向到相应的人员或部门。 可以将呼叫者定向到组织中的特定人员，在等待与下一个可用代理或语音邮件通信的地方呼叫队列。 可以为工作时间、休息时间和假期指定不同的呼叫路由选项。

可以使用文本转语音 (系统生成的提示) 或上传录制的音频文件来创建菜单提示。 语音识别接受免提导航的语音命令，但呼叫者也可以使用手机键盘导航菜单。

每个自动助理都有特定的语言和时区。 如果使用多种语言或全球多个部分进行业务，则可以创建尽可能多的不同自动助理，以适应呼叫者的需求。

对于每个自动助理，可以配置运算符。 虽然可以将操作员呼叫配置为转到各种目标，但操作员功能旨在允许呼叫者与组织中的特定人员通信，该人员可帮助他们。

可以将自动助理配置为允许呼叫者按名称或扩展号搜索组织的目录。 在自动助理中，可以通过选择要包括或排除的用户组来指定可用于目录搜索的用户。  (这称为 *拨号范围*。) 

呼叫者可以通过直接电话号码（如果已配置）或从另一个自动助理或呼叫队列重定向来联系自动助理。

## <a name="call-queues"></a>呼叫队列

呼叫队列类似于物理大楼中的候诊室。 呼叫方在呼叫路由到队列中的代理时等待等待。 呼叫队列通常用于销售和服务函数。 但是，呼叫队列可用于任何呼叫数超过内部容量的情况，例如繁忙的设施中的接待员。

如果队列中的呼叫者总数或等待时间超过指定的限制，则呼叫队列允许特定的呼叫路由。 呼叫可以路由到特定人员、语音邮件、其他呼叫队列或自动助理。

与自动助理一样，呼叫队列都有语言设置。 如果使用多种语言进行业务，则可以使用不同的呼叫队列。 如果代理是多语言的，则可以是多个队列的成员。

对于每个呼叫队列，可以指定队列中的代理是否可以选择不接听呼叫，以及是否应根据呼叫在Teams中的状态指示将呼叫路由到他们。

可以将电话号码分配给呼叫队列，但呼叫队列在休息时间和节假日不提供单独的呼叫路由。 除非呼叫队列配备 24/7，否则建议将电话号码分配给在工作时间重定向到呼叫队列的自动助理。

## <a name="prerequisites"></a>先决条件

若要配置自动助理和呼叫队列，需要以下资源：

- 每个自动助理和每个呼叫队列的资源帐户
- 免费Microsoft 电话系统 - 每个资源帐户的虚拟用户许可证
- 要直接拨入的每个资源帐户至少有一个 [Microsoft 服务号码](getting-service-phone-numbers.md)、运营商连接号码、直接路由号码或混合号码
 - 服务号码可以是收费或免费号码

> [!NOTE]
> 已禁用资源帐户进行登录，并且必须保持此状态。 对于这些帐户，聊天和状态不可用。

必须企业语音联机或本地用户启用从呼叫队列接收呼叫的代理。 此外，如果呼叫队列使用直接路由号码，则需要会议或转移呼叫的代理还需要：

- 如果呼叫队列使用传输模式，则分配联机语音路由策略
- 如果呼叫队列使用会议模式，则分配有音频会议许可证或联机语音路由策略

如果代理使用Microsoft Teams应用进行呼叫队列调用，则它们需要处于 TeamsOnly 模式。

在呼叫队列中使用资源帐户进行呼叫行 ID 时，或者当自动助理或呼叫队列将呼叫传输到外部电话号码时，资源帐户必须具有电话系统虚拟用户许可证和以下分配之一：

- 呼叫 [计划](calling-plans-for-office-365.md) 许可证和分配的电话号码
- 分配[的运营商连接](operator-connect-plan.md)电话号码
- 使用直接路由) 时，在线 [语音路由策略](manage-voice-routing-policies.md) (电话号码分配是可选的

> [!NOTE]
> 如果分配给资源帐户的呼叫计划被禁用或删除，则将使用 [通信额度](what-are-communications-credits.md)（如果在租户中可用 (而未分配给资源帐户) ）。 如果没有呼叫计划或通信额度，则调用将失败。
>
> 仅Microsoft Teams用户和呼叫代理支持自动助理和呼叫队列的直接路由服务号码。
> 
> 不支持呼叫计划、运营商连接和直接路由中继之间的传输。
> 
> 在混合方案中，必须在本地创建资源帐户。 有关详细信息，请参阅 [计划云呼叫队列](/skypeforbusiness/hybrid/plan-call-queue)。

## <a name="business-decisions"></a>业务决策

在设置自动助理和呼叫队列之前，应就如何在业务中使用这些功能做出一些决定。 这些决策将确定配置自动助理和呼叫队列时选择的设置。

记录这些问题的答案，并向执行配置的管理员提供信息。

- 需要哪些语言？ 这些语言在何处需要 - 哪个部门或组？
- 是否允许来自呼叫方的语音输入或仅拨号输入？
- 是否需要在休息时间或节假日单独呼叫路由？ 什么是小时和假期？
- 是否允许呼叫队列中的代理选择不接听呼叫？
- 是否希望呼叫队列或运算符中的代理在拨出时具有特定的调用方 ID？
- 是否要在组织中启用 [呼叫停车和检索](call-park-and-retrieve.md) ，以帮助人员或部门之间的呼叫交接？
- 对于语音提示，是要录制自己的语音还是使用系统生成的语音？  (系统生成的语音易于更新。) 

## <a name="technical-decisions"></a>技术决策

使用自动助理和呼叫队列将呼叫者连接到组织中的人员时，在开始配置之前需要做出一些技术决策。

可以通过以下方式将代理添加到调用队列：

- 单个用户
- 通讯组列表
- 安全组，包括启用邮件的安全组
- Microsoft 365 组或Teams

如果需要，可以对每个队列使用这些选项的组合。 具有电子邮件地址的组可用于语音邮件。 使用Teams提供了许多优势，包括共享文件存储和代理之间的聊天、可接收语音邮件的常见邮箱，以及可扩展的平台，包括与业务线应用程序或Power Apps的集成。

建议在开始配置之前选择将呼叫代理添加到队列的策略。

如果你有现有的自动助理和呼叫队列基础结构，并且要迁移到Teams，则需要计划将现有电话号码传输到新的自动助理和呼叫队列。 可能需要创建 [端口订单](phone-number-calling-plans/port-order-overview.md) 才能从其他提供程序移动数字。 建议暂时获取一个或多个新电话号码，并测试自动助理和呼叫队列流，然后再将它们切换到当前服务中的号码。

*会议模式* 是呼叫队列中的一个选项，可显著减少将TEAMS VOIP 呼叫和 PSTN 调用连接到代理所需的时间。 若要使会议模式正常工作，呼叫队列中的代理必须使用以下客户端之一：

- Microsoft Teams桌面客户端、Android 应用或 iOS 应用的最新版本
- Microsoft 电话系统版本 1449/1.0.94.2020051601 或更高版本
  
将代理的Teams帐户设置为仅限Teams模式。 不符合要求的代理不包括在呼叫路由列表中。

如果代理都使用兼容的客户端，建议为呼叫队列启用会议模式。

## <a name="plan-your-call-routing-flow"></a>规划呼叫路由流

作为规划过程的一部分，建议在关系图中为组织制定呼叫路由。 此图可帮助确定调用组织人员的最有效路由。 还可以使用此图来确定需要创建的自动助理和呼叫队列，以及服务号码、许可证和资源帐户等相关要求。

让我们看看自动助理和呼叫队列如何路由呼叫。

自动助理通过以下方式之一路由所有呼叫：

- **立即重定向** - 呼叫可以重定向到呼叫路由目标之一， (在接听或初始问候语后立即) 下面列出。
- **根据拨号选项重定向** - 呼叫者可在分配给电话键盘上号码的选项之间进行选择，即 0-9。 可以为每个拨号密钥分配呼叫路由目标。
- **按姓名或扩展呼叫者拨号** - 可以定向呼叫者拨打他们尝试在组织目录中联系的人员的扩展号码，或通过拼写人员的姓名来拨号。
- **断开连接** - 自动助理可以挂断呼叫。

> [!NOTE]
> 单个自动助理只能支持单个“dial by”方法。  若要允许呼叫者按姓名和号码拨号，需要创建一个自动助理，该助理具有按名称拨号的选项，另一个选项用于按扩展拨号。  其中每个选项都将路由到为这些“拨号”方案配置的单独自动助理。

当自动助理或呼叫队列重定向呼叫时，可以从以下呼叫路由目标中进行选择：

- **组织中的人员** - 组织中能够接收语音呼叫的人员。 这可以是使用Skype for Business Server托管在本地的联机用户或用户。
- **语音应用** - 另一个自动助理或呼叫队列。 选择与目标关联的资源帐户。
- **外部电话号码** - 任何电话号码。  (请参阅 [外部传输技术详细信息](create-a-phone-system-auto-attendant.md#external-phone-number-transfers---technical-details)) 。
- **语音邮件** - 与指定的Microsoft 365组关联的语音邮箱。 可以选择是否需要语音邮件听录和“请在音调后留下邮件”。 系统提示。
- **操作员** (自动助理仅) - 为自动助理定义的运算符。 定义运算符是可选的。 运算符可以是此列表中的任何其他目标。

自动助理为在工作时间以外和节假日接听的呼叫提供单独的呼叫路由选项。 

呼叫队列将调用方置于保留状态，直到分配给队列的代理可以接听其呼叫。 在以下两种情况下，调用方可能会被定向出队列：

- **呼叫溢出** - 如果队列中的调用数超过设置的限制，则新调用方会从队列中重定向。
- **调用超时** - 如果调用方在队列中的时间比配置的超时设置长，则会将它们重定向到队列之外。

从队列中重定向的呼叫可以发送到上面列出的任何呼叫路由目标，运算符除外。  (呼叫队列没有运算符，但可以将调用方重定向到与为自动助理配置的运算符相同的目标。) 

下面的示例演示了使用自动助理和呼叫队列进行呼叫路由的示例。

![使用自动助理和呼叫队列的呼叫路由图。](media/attendant-and-queue-call-routing.png)

在上面的示例中：

- 零 (0) 键将调用方重定向到运算符。 该自动助理的操作员已配置为 **组织中的人员**。
- 一个 (1) 密钥将调用方重定向到销售呼叫队列。 此呼叫队列连接到包含分配给队列的销售团队的团队。
- 两个 (2) 键将调用方重定向到支持呼叫队列。 此呼叫队列连接到包含分配给团队的支持团队的团队。
- 支持呼叫队列通过干预自动助理提供直接电话号码。 让自动助理应答支持行允许单独的休息时间和假日呼叫路由。
- 三 (3) 密钥将用户重定向到公司目录的另一个自动助理。 公司目录自动助理允许呼叫者通过拨号或扩展呼叫组织中的个人。

建议创建一个或多个类似上述图表的图表，以映射呼叫路由。 请务必在关系图或随附文档中包含以下内容：

- 哪些自动助理可以通过电话号码直接访问？
- 每个自动助理的非工作时间和假期路由要求是什么？
- 每个呼叫队列的成员身份。  (可以单独添加用户或将队列映射到不同类型的组。 将队列映射到团队提供了最通用的体验。) 

下面是一些呼叫路由最佳做法：

- 查看现有的呼叫系统，并分析传入呼叫的类型和频率。 使用此信息可帮助通知自动助理和呼叫队列结构。
- 将最常见的选项最早放在菜单中，以便尽快路由调用。
- 除非队列 24/7 可用，否则请避免将服务号码直接连接到呼叫队列。 呼叫队列不允许在休息时间或节假日单独处理呼叫。 如果想要有一个具有直接编号的队列，请将该号码分配给自动助理，该自动助理会在工作时间自动重定向到队列。
- 如果收到大量呼叫，请求有关公司的基本信息（例如工作时间、位置或网站地址），请考虑创建自动助理以使用录制的消息来回答这些问题。
- 将菜单项列表保留为五个或更少。 调用方可能难以记住五个以上的选项。 如果需要更多选项来正确路由呼叫，请使用嵌套自动助理。
- 首先描述服务，然后选择按 (，例如：对于 Sales，请按 1) ，而不是 (方式。 按 1 表示销售) 。
- 调用方将了解用户术语，而不是在内部使用的内容。
- 避免频繁更新呼叫路由。 如果将来更改自动助理的菜单选项，请在前 30 天的语音提示中调用。

## <a name="getting-started"></a>入门

完成本文中的规划任务后，请按照以下步骤设置自动助理和呼叫队列：

1. 获取需要自动助理和呼叫队列的服务号码，通过从组织外部直接拨号即可访问这些服务号码。 这可能包括 [从其他提供商转移号码](phone-number-calling-plans/transfer-phone-numbers-to-teams.md) 或 [请求新的服务号码](getting-service-phone-numbers.md)。

2. 获取电话系统 - 计划创建的每个资源帐户的[虚拟用户许可证](teams-add-on-licensing/virtual-user.md)。 这些许可证是免费的，因此建议在将来决定对资源帐户进行更改时额外获取一些许可证。

3. 为要创建的每个自动助理和呼叫队列[创建资源帐户](manage-resource-accounts.md)。 为每个帐户分配一个电话系统 - 虚拟用户许可证和一个服务编号（可选）。

4. [创建要在](set-up-holidays-in-teams.md) 自动助理中单独进行呼叫路由的假期。

5. （可选）如果要使用此功能帮助呼叫传输，请 [设置呼叫停车和检索](call-park-and-retrieve.md) 。

6. 创建要用于包含呼叫队列的调用代理的组。

7. 如果计划允许按扩展拨号，请确保已将用户的扩展号添加到其Azure Active Directory配置文件。

完成上述步骤后，即可创建自动助理和呼叫队列。 由于自动助理和呼叫队列可以将呼叫重定向到彼此，因此请参阅创建的工作流关系图，以确定应首先创建哪个自动助理或呼叫队列。 在上图中的示例中，你将在创建 Contoso 主自动助理之前创建销售和支持呼叫队列，因为主自动助理需要将呼叫者定向到销售和支持呼叫队列。

有关如何创建自动助理和呼叫队列的信息，请参阅以下文章：

- [设置自动助理](create-a-phone-system-auto-attendant.md)
- [创建呼叫队列](create-a-phone-system-call-queue.md)

如果需要更广泛的功能（例如与工作流、机器人和短信集成），请考虑[Azure 通信服务](/azure/communication-services/overview)。

## <a name="related-topics"></a>相关主题

[规划直接路由](direct-routing-plan.md)

[音频会议和通话套餐的国家/地区可用性](country-and-region-availability-for-audio-conferencing-and-calling-plans/country-and-region-availability-for-audio-conferencing-and-calling-plans.md)

[创建呼叫队列 - 小型企业教程](business-voice/create-a-phone-system-call-queue-smb.md)

[设置自动助理 - 小型企业教程](business-voice/create-a-phone-system-auto-attendant-smb.md)
